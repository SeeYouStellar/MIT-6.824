=== RUN   TestSnapshotAllCrash2D
Test (2D): crash and restart all servers ...
term 1 server 1 vote for server 2
term 1 server 2 get vote from server 1
term 1 server 2 become leader
------------------------------------------------------
term 1 server 0 vote for server 2
term 1 server 2 get outdate rpc reply from server 0
flag 17619 term 1 leader 2 nextIndex[0]: 1  matchIndex[0]: 0
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 0  PrevLogTerm: 0 leaderCommit: 0 
------------------------------------------------------
flag 2094 term 1 leader 2 nextIndex[1]: 1  matchIndex[1]: 0
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 0  PrevLogTerm: 0 leaderCommit: 0 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:0 
server 1 log:
[{<nil> 0 0}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:0 
server 0 log:
[{<nil> 0 0}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=1
update matchIndex[1]=0
update leader CommitIndex=0
leader log:
[{<nil> 0 0}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=1
update matchIndex[0]=0
update leader CommitIndex=0
leader log:
[{<nil> 0 0}]
------------------------------------------------------
client write log 4485872920935480252 (index 1) to leader 2
flag 92464 term 1 leader 2 nextIndex[0]: 1  matchIndex[0]: 0
[{4485872920935480252 1 1}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 0  PrevLogTerm: 0 leaderCommit: 0 
------------------------------------------------------
flag 10883 term 1 leader 2 nextIndex[1]: 1  matchIndex[1]: 0
[{4485872920935480252 1 1}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 0  PrevLogTerm: 0 leaderCommit: 0 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:0 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=2
update matchIndex[1]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:0 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=2
update matchIndex[0]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
flag 69274 term 1 leader 2 nextIndex[0]: 2  matchIndex[0]: 1
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
flag 57844 term 1 leader 2 nextIndex[1]: 2  matchIndex[1]: 1
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:1 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:1 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=2
update matchIndex[0]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=2
update matchIndex[1]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {4485872920935480252 1 1}]
------------------------------------------------------
client write log 2212299107783280897 (index 2) to leader 2
flag 29707 term 1 leader 2 nextIndex[0]: 2  matchIndex[0]: 1
[{2212299107783280897 1 2}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
flag 8311 term 1 leader 2 nextIndex[1]: 2  matchIndex[1]: 1
[{2212299107783280897 1 2}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:1 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=3
update matchIndex[1]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:1 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=3
update matchIndex[0]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
flag 99276 term 1 leader 2 nextIndex[0]: 3  matchIndex[0]: 2
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
flag 87786 term 1 leader 2 nextIndex[1]: 3  matchIndex[1]: 2
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:2 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=3
update matchIndex[1]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:2 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=3
update matchIndex[0]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2}]
------------------------------------------------------
client write log 3101119936736920037 (index 3) to leader 2
flag 73543 term 1 leader 2 nextIndex[0]: 3  matchIndex[0]: 2
[{3101119936736920037 1 3}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
flag 44739 term 1 leader 2 nextIndex[1]: 3  matchIndex[1]: 2
[{3101119936736920037 1 3}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:2 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=4
update matchIndex[1]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:2 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=4
update matchIndex[0]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
flag 50275 term 1 leader 2 nextIndex[0]: 4  matchIndex[0]: 3
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
flag 82871 term 1 leader 2 nextIndex[1]: 4  matchIndex[1]: 3
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:3 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:3 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=4
update matchIndex[1]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=4
update matchIndex[0]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3}]
------------------------------------------------------
client write log 7168013763350328754 (index 4) to leader 2
flag 21887 term 1 leader 2 nextIndex[0]: 4  matchIndex[0]: 3
[{7168013763350328754 1 4}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
flag 48797 term 1 leader 2 nextIndex[1]: 4  matchIndex[1]: 3
[{7168013763350328754 1 4}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:3 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
term 1 server 0 AppendEntries true commitIndex:3 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
update nextIndex[1]=5
update matchIndex[1]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=5
update matchIndex[0]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
flag 94869 term 1 leader 2 nextIndex[0]: 5  matchIndex[0]: 4
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
flag 47640 term 1 leader 2 nextIndex[1]: 5  matchIndex[1]: 4
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:4 
server 1 log:
term 1 server 0 AppendEntries true commitIndex:4 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=5
update matchIndex[0]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=5
update matchIndex[1]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4}]
------------------------------------------------------
client write log 7052403687150764574 (index 5) to leader 2
flag 68389 term 1 leader 2 nextIndex[0]: 5  matchIndex[0]: 4
[{7052403687150764574 1 5}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
flag 96287 term 1 leader 2 nextIndex[1]: 5  matchIndex[1]: 4
[{7052403687150764574 1 5}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:4 
server 1 log:
term 1 server 0 AppendEntries true commitIndex:4 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=6
update matchIndex[0]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=6
update matchIndex[1]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
flag 33336 term 1 leader 2 nextIndex[0]: 6  matchIndex[0]: 5
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
flag 52983 term 1 leader 2 nextIndex[1]: 6  matchIndex[1]: 5
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:5 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:5 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=6
update matchIndex[0]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=6
update matchIndex[1]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5}]
------------------------------------------------------
client write log 6023122833094007380 (index 6) to leader 2
flag 79944 term 1 leader 2 nextIndex[0]: 6  matchIndex[0]: 5
[{6023122833094007380 1 6}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
flag 1471 term 1 leader 2 nextIndex[1]: 6  matchIndex[1]: 5
[{6023122833094007380 1 6}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:5 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=7
update matchIndex[1]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:5 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=7
update matchIndex[0]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
------------------------------------------------------
flag 72542 term 1 leader 2 nextIndex[0]: 7  matchIndex[0]: 6
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
flag 14935 term 1 leader 2 nextIndex[1]: 7  matchIndex[1]: 6
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:6 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=7
update matchIndex[0]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
term 1 server 1 AppendEntries true commitIndex:6 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
------------------------------------------------------
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=7
update matchIndex[1]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6}]
------------------------------------------------------
client write log 4935156043177254732 (index 7) to leader 2
flag 77388 term 1 leader 2 nextIndex[0]: 7  matchIndex[0]: 6
[{4935156043177254732 1 7}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
flag 28860 term 1 leader 2 nextIndex[1]: 7  matchIndex[1]: 6
[{4935156043177254732 1 7}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:6 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=8
update matchIndex[1]=7
update leader CommitIndex=7
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:6 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=8
update matchIndex[0]=7
update leader CommitIndex=7
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
flag 57276 term 1 leader 2 nextIndex[0]: 8  matchIndex[0]: 7
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
flag 25965 term 1 leader 2 nextIndex[1]: 8  matchIndex[1]: 7
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:7 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=8
update matchIndex[1]=7
update leader CommitIndex=7
leader log:
term 1 server 0 AppendEntries true commitIndex:7 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=8
update matchIndex[0]=7
update leader CommitIndex=7
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 1 voteFor 2 logs [{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 1 voteFor 2 logs [{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 1 voteFor 2 logs [{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
!!!!!! server 2 crash
flag 62847 term 1 leader 2 nextIndex[0]: 8  matchIndex[0]: 7
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
flag 51621 term 1 leader 2 nextIndex[1]: 8  matchIndex[1]: 7
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
term 2 server 1 vote for server 2
term 2 server 0 vote for server 2
term 2 server 2 get vote from server 1
term 2 server 2 become leader
------------------------------------------------------
term 2 server 2 get outdate rpc reply from server 0
flag 21081 term 2 leader 2 nextIndex[0]: 8  matchIndex[0]: 0
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 0 
------------------------------------------------------
flag 90974 term 2 leader 2 nextIndex[1]: 8  matchIndex[1]: 0
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 0 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:0 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=8
update matchIndex[0]=7
update leader CommitIndex=0
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:0 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=8
update matchIndex[1]=7
update leader CommitIndex=0
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7}]
------------------------------------------------------
client write log 4518246140040651695 (index 8) to leader 2
flag 24265 term 2 leader 2 nextIndex[0]: 8  matchIndex[0]: 7
[{4518246140040651695 2 8}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 0 
------------------------------------------------------
flag 623 term 2 leader 2 nextIndex[1]: 8  matchIndex[1]: 7
[{4518246140040651695 2 8}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 0 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:0 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:0 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=9
update matchIndex[0]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=9
update matchIndex[1]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
flag 37304 term 2 leader 2 nextIndex[0]: 9  matchIndex[0]: 8
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 2 leaderCommit: 8 
------------------------------------------------------
flag 44322 term 2 leader 2 nextIndex[1]: 9  matchIndex[1]: 8
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 2 leaderCommit: 8 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:8 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:8 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=9
update matchIndex[1]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=9
update matchIndex[0]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8}]
------------------------------------------------------
client write log 2436004777290589570 (index 9) to leader 2
flag 3997 term 2 leader 2 nextIndex[0]: 9  matchIndex[0]: 8
[{2436004777290589570 2 9}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 2 leaderCommit: 8 
------------------------------------------------------
flag 42217 term 2 leader 2 nextIndex[1]: 9  matchIndex[1]: 8
[{2436004777290589570 2 9}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 2 leaderCommit: 8 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:8 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8} {2436004777290589570 2 9}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:8 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8} {2436004777290589570 2 9}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=10
update matchIndex[1]=9
update leader CommitIndex=9
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8} {2436004777290589570 2 9}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=10
update matchIndex[0]=9
update leader CommitIndex=9
leader log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8} {2436004777290589570 2 9}]
------------------------------------------------------
term 2 Server2 start snapshot! index=9
term 2 server2 snapshot success
lastIncludedIndex=9 lastApplied=9 lastIndex=9
-------------------------------------------------------------
flag 42544 term 2 leader 2 nextIndex[0]: 10  matchIndex[0]: 9
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 2 leaderCommit: 9 
------------------------------------------------------
flag 15887 term 2 leader 2 nextIndex[1]: 10  matchIndex[1]: 9
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 2 leaderCommit: 9 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:9 
server 1 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8} {2436004777290589570 2 9}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=10
update matchIndex[1]=9
update leader CommitIndex=9
leader log:
[{snapshot 2 9}]
term 2 server 0 AppendEntries true commitIndex:9 
server 0 log:
[{<nil> 0 0} {4485872920935480252 1 1} {2212299107783280897 1 2} {3101119936736920037 1 3} {7168013763350328754 1 4} {7052403687150764574 1 5} {6023122833094007380 1 6} {4935156043177254732 1 7} {4518246140040651695 2 8} {2436004777290589570 2 9}]
------------------------------------------------------
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=10
update matchIndex[0]=9
update leader CommitIndex=9
leader log:
[{snapshot 2 9}]
------------------------------------------------------
term 2 Server1 start snapshot! index=9
term 2 server1 snapshot success
lastIncludedIndex=9 lastApplied=9 lastIndex=9
-------------------------------------------------------------
term 2 Server0 start snapshot! index=9
term 2 server0 snapshot success
lastIncludedIndex=9 lastApplied=9 lastIndex=9
-------------------------------------------------------------
client write log 2774595579150779877 (index 10) to leader 2
flag 38020 term 2 leader 2 nextIndex[0]: 10  matchIndex[0]: 9
[{2774595579150779877 2 10}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 2 leaderCommit: 9 
------------------------------------------------------
flag 84906 term 2 leader 2 nextIndex[1]: 10  matchIndex[1]: 9
[{2774595579150779877 2 10}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 2 leaderCommit: 9 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:9 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=11
update matchIndex[0]=10
update leader CommitIndex=10
leader log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:9 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=11
update matchIndex[1]=10
update leader CommitIndex=10
leader log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
flag 75549 term 2 leader 2 nextIndex[0]: 11  matchIndex[0]: 10
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
flag 51938 term 2 leader 2 nextIndex[1]: 11  matchIndex[1]: 10
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:10 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:10 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=11
update matchIndex[1]=10
update leader CommitIndex=10
leader log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=11
update matchIndex[0]=10
update leader CommitIndex=10
leader log:
[{snapshot 2 9} {2774595579150779877 2 10}]
------------------------------------------------------
client write log 3133389502777247145 (index 11) to leader 2
flag 92327 term 2 leader 2 nextIndex[0]: 11  matchIndex[0]: 10
[{3133389502777247145 2 11}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
flag 44333 term 2 leader 2 nextIndex[1]: 11  matchIndex[1]: 10
[{3133389502777247145 2 11}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:10 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=12
update matchIndex[1]=11
update leader CommitIndex=11
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:10 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=12
update matchIndex[0]=11
update leader CommitIndex=11
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
flag 17315 term 2 leader 2 nextIndex[0]: 12  matchIndex[0]: 11
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
flag 90906 term 2 leader 2 nextIndex[1]: 12  matchIndex[1]: 11
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:11 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=12
update matchIndex[1]=11
update leader CommitIndex=11
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:11 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=12
update matchIndex[0]=11
update leader CommitIndex=11
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11}]
------------------------------------------------------
client write log 3687596204837836176 (index 12) to leader 2
flag 80930 term 2 leader 2 nextIndex[0]: 12  matchIndex[0]: 11
[{3687596204837836176 2 12}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
flag 71968 term 2 leader 2 nextIndex[1]: 12  matchIndex[1]: 11
[{3687596204837836176 2 12}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:11 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=13
update matchIndex[1]=12
update leader CommitIndex=12
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:11 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=13
update matchIndex[0]=12
update leader CommitIndex=12
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
flag 82244 term 2 leader 2 nextIndex[0]: 13  matchIndex[0]: 12
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
flag 28854 term 2 leader 2 nextIndex[1]: 13  matchIndex[1]: 12
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:12 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=13
update matchIndex[1]=12
update leader CommitIndex=12
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:12 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=13
update matchIndex[0]=12
update leader CommitIndex=12
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12}]
------------------------------------------------------
client write log 6602839049333238798 (index 13) to leader 2
flag 58667 term 2 leader 2 nextIndex[0]: 13  matchIndex[0]: 12
[{6602839049333238798 2 13}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
flag 83401 term 2 leader 2 nextIndex[1]: 13  matchIndex[1]: 12
[{6602839049333238798 2 13}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:12 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:12 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=14
update matchIndex[0]=13
update leader CommitIndex=13
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=14
update matchIndex[1]=13
update leader CommitIndex=13
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
flag 50087 term 2 leader 2 nextIndex[0]: 14  matchIndex[0]: 13
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
flag 89967 term 2 leader 2 nextIndex[1]: 14  matchIndex[1]: 13
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:13 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=14
update matchIndex[1]=13
update leader CommitIndex=13
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:13 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=14
update matchIndex[0]=13
update leader CommitIndex=13
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13}]
------------------------------------------------------
client write log 3738967437158721124 (index 14) to leader 2
flag 92530 term 2 leader 2 nextIndex[0]: 14  matchIndex[0]: 13
[{3738967437158721124 2 14}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
flag 68579 term 2 leader 2 nextIndex[1]: 14  matchIndex[1]: 13
[{3738967437158721124 2 14}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:13 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=15
update matchIndex[0]=14
update leader CommitIndex=14
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:13 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=15
update matchIndex[1]=14
update leader CommitIndex=14
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
flag 93103 term 2 leader 2 nextIndex[0]: 15  matchIndex[0]: 14
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
flag 30513 term 2 leader 2 nextIndex[1]: 15  matchIndex[1]: 14
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:14 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:14 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=15
update matchIndex[1]=14
update leader CommitIndex=14
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=15
update matchIndex[0]=14
update leader CommitIndex=14
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14}]
------------------------------------------------------
client write log 4348493008754041032 (index 15) to leader 2
flag 98870 term 2 leader 2 nextIndex[0]: 15  matchIndex[0]: 14
[{4348493008754041032 2 15}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
flag 28076 term 2 leader 2 nextIndex[1]: 15  matchIndex[1]: 14
[{4348493008754041032 2 15}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:14 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=16
update matchIndex[1]=15
update leader CommitIndex=15
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:14 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=16
update matchIndex[0]=15
update leader CommitIndex=15
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
flag 98562 term 2 leader 2 nextIndex[0]: 16  matchIndex[0]: 15
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
flag 87617 term 2 leader 2 nextIndex[1]: 16  matchIndex[1]: 15
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:15 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=16
update matchIndex[1]=15
update leader CommitIndex=15
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:15 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=16
update matchIndex[0]=15
update leader CommitIndex=15
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15}]
------------------------------------------------------
client write log 2055329773295109236 (index 16) to leader 2
flag 71378 term 2 leader 2 nextIndex[0]: 16  matchIndex[0]: 15
[{2055329773295109236 2 16}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
flag 27397 term 2 leader 2 nextIndex[1]: 16  matchIndex[1]: 15
[{2055329773295109236 2 16}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:15 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=17
update matchIndex[1]=16
update leader CommitIndex=16
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:15 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=17
update matchIndex[0]=16
update leader CommitIndex=16
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
flag 31993 term 2 leader 2 nextIndex[0]: 17  matchIndex[0]: 16
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
flag 68050 term 2 leader 2 nextIndex[1]: 17  matchIndex[1]: 16
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:16 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=17
update matchIndex[0]=16
update leader CommitIndex=16
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:16 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=17
update matchIndex[1]=16
update leader CommitIndex=16
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16}]
------------------------------------------------------
client write log 1435522000255053274 (index 17) to leader 2
flag 97471 term 2 leader 2 nextIndex[0]: 17  matchIndex[0]: 16
[{1435522000255053274 2 17}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
flag 27827 term 2 leader 2 nextIndex[1]: 17  matchIndex[1]: 16
[{1435522000255053274 2 17}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:16 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:16 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=18
update matchIndex[0]=17
update leader CommitIndex=17
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=18
update matchIndex[1]=17
update leader CommitIndex=17
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
flag 98602 term 2 leader 2 nextIndex[0]: 18  matchIndex[0]: 17
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
flag 63210 term 2 leader 2 nextIndex[1]: 18  matchIndex[1]: 17
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:17 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=18
update matchIndex[1]=17
update leader CommitIndex=17
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:17 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=18
update matchIndex[0]=17
update leader CommitIndex=17
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17}]
------------------------------------------------------
client write log 6490918219167085927 (index 18) to leader 2
flag 95170 term 2 leader 2 nextIndex[0]: 18  matchIndex[0]: 17
[{6490918219167085927 2 18}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
flag 20420 term 2 leader 2 nextIndex[1]: 18  matchIndex[1]: 17
[{6490918219167085927 2 18}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:17 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:17 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=19
update matchIndex[1]=18
update leader CommitIndex=18
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=19
update matchIndex[0]=18
update leader CommitIndex=18
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
flag 4528 term 2 leader 2 nextIndex[0]: 19  matchIndex[0]: 18
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
flag 79452 term 2 leader 2 nextIndex[1]: 19  matchIndex[1]: 18
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:18 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=19
update matchIndex[1]=18
update leader CommitIndex=18
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:18 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=19
update matchIndex[0]=18
update leader CommitIndex=18
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18}]
------------------------------------------------------
client write log 2444235378030176579 (index 19) to leader 2
flag 59073 term 2 leader 2 nextIndex[0]: 19  matchIndex[0]: 18
[{2444235378030176579 2 19}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
flag 80965 term 2 leader 2 nextIndex[1]: 19  matchIndex[1]: 18
[{2444235378030176579 2 19}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:18 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18} {2444235378030176579 2 19}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:18 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18} {2444235378030176579 2 19}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=20
update matchIndex[0]=19
update leader CommitIndex=19
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18} {2444235378030176579 2 19}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=20
update matchIndex[1]=19
update leader CommitIndex=19
leader log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18} {2444235378030176579 2 19}]
------------------------------------------------------
term 2 Server2 start snapshot! index=19
term 2 server2 snapshot success
lastIncludedIndex=19 lastApplied=19 lastIndex=19
-------------------------------------------------------------
flag 72585 term 2 leader 2 nextIndex[0]: 20  matchIndex[0]: 19
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 89884 term 2 leader 2 nextIndex[1]: 20  matchIndex[1]: 19
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18} {2444235378030176579 2 19}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=20
update matchIndex[0]=19
update leader CommitIndex=19
leader log:
[{snapshot 2 19}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 9} {2774595579150779877 2 10} {3133389502777247145 2 11} {3687596204837836176 2 12} {6602839049333238798 2 13} {3738967437158721124 2 14} {4348493008754041032 2 15} {2055329773295109236 2 16} {1435522000255053274 2 17} {6490918219167085927 2 18} {2444235378030176579 2 19}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=20
update matchIndex[1]=19
update leader CommitIndex=19
leader log:
[{snapshot 2 19}]
------------------------------------------------------
term 2 Server1 start snapshot! index=19
term 2 server1 snapshot success
lastIncludedIndex=19 lastApplied=19 lastIndex=19
-------------------------------------------------------------
term 2 Server0 start snapshot! index=19
term 2 server0 snapshot success
lastIncludedIndex=19 lastApplied=19 lastIndex=19
-------------------------------------------------------------
client write log 5426983428239481111 (index 20) to leader 2
flag 65332 term 2 leader 2 nextIndex[0]: 20  matchIndex[0]: 19
[{5426983428239481111 2 20}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 58344 term 2 leader 2 nextIndex[1]: 20  matchIndex[1]: 19
[{5426983428239481111 2 20}]
term 2 leader 2 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=21
update matchIndex[1]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=21
update matchIndex[0]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
flag 55466 term 2 leader 2 nextIndex[0]: 21  matchIndex[0]: 20
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 20 
------------------------------------------------------
flag 39826 term 2 leader 2 nextIndex[1]: 21  matchIndex[1]: 20
[]
term 2 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 20 
------------------------------------------------------
term 2 server 0 AppendEntries true commitIndex:20 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=21
update matchIndex[0]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:20 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=21
update matchIndex[1]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 2 voteFor 2 logs [{snapshot 2 19} {5426983428239481111 2 20}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 2 voteFor 2 logs [{snapshot 2 19} {5426983428239481111 2 20}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 2 voteFor 2 logs [{snapshot 2 19} {5426983428239481111 2 20}]
!!!!!! server 2 crash
term 3 server 1 vote for server 2
term 3 server 0 vote for server 2
term 3 server 2 get vote from server 1
term 3 server 2 become leader
------------------------------------------------------
term 3 server 2 get outdate rpc reply from server 0
flag 67849 term 3 leader 2 nextIndex[0]: 21  matchIndex[0]: 0
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 20573 term 3 leader 2 nextIndex[1]: 21  matchIndex[1]: 0
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=21
update matchIndex[1]=20
update leader CommitIndex=19
leader log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=21
update matchIndex[0]=20
update leader CommitIndex=19
leader log:
[{snapshot 2 19} {5426983428239481111 2 20}]
------------------------------------------------------
client write log 2653194176536303810 (index 21) to leader 2
flag 1647 term 3 leader 2 nextIndex[0]: 21  matchIndex[0]: 20
[{2653194176536303810 3 21}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 32458 term 3 leader 2 nextIndex[1]: 21  matchIndex[1]: 20
[{2653194176536303810 3 21}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=22
update matchIndex[1]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=22
update matchIndex[0]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
flag 22995 term 3 leader 2 nextIndex[0]: 22  matchIndex[0]: 21
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
flag 80351 term 3 leader 2 nextIndex[1]: 22  matchIndex[1]: 21
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:21 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=22
update matchIndex[1]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:21 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=22
update matchIndex[0]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21}]
------------------------------------------------------
client write log 8315554094944452959 (index 22) to leader 2
flag 30572 term 3 leader 2 nextIndex[0]: 22  matchIndex[0]: 21
[{8315554094944452959 3 22}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
flag 74682 term 3 leader 2 nextIndex[1]: 22  matchIndex[1]: 21
[{8315554094944452959 3 22}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:21 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=23
update matchIndex[1]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:21 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=23
update matchIndex[0]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
flag 67619 term 3 leader 2 nextIndex[0]: 23  matchIndex[0]: 22
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
flag 71622 term 3 leader 2 nextIndex[1]: 23  matchIndex[1]: 22
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:22 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:22 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=23
update matchIndex[0]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=23
update matchIndex[1]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22}]
------------------------------------------------------
client write log 8236364564341482265 (index 23) to leader 2
flag 18042 term 3 leader 2 nextIndex[0]: 23  matchIndex[0]: 22
[{8236364564341482265 3 23}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
flag 39597 term 3 leader 2 nextIndex[1]: 23  matchIndex[1]: 22
[{8236364564341482265 3 23}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:22 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=24
update matchIndex[0]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:22 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=24
update matchIndex[1]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 false nextIndex[1] 8->7
------------------------------------------------------
flag 53007 term 3 leader 2 nextIndex[0]: 24  matchIndex[0]: 23
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
flag 74596 term 3 leader 2 nextIndex[1]: 24  matchIndex[1]: 23
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:23 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:23 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=24
update matchIndex[1]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=24
update matchIndex[0]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23}]
------------------------------------------------------
client write log 5811365552708202423 (index 24) to leader 2
flag 66023 term 3 leader 2 nextIndex[0]: 24  matchIndex[0]: 23
[{5811365552708202423 3 24}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
flag 62920 term 3 leader 2 nextIndex[1]: 24  matchIndex[1]: 23
[{5811365552708202423 3 24}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:23 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=25
update matchIndex[1]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:23 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=25
update matchIndex[0]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
flag 54442 term 3 leader 2 nextIndex[0]: 25  matchIndex[0]: 24
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
flag 68819 term 3 leader 2 nextIndex[1]: 25  matchIndex[1]: 24
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:24 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:24 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=25
update matchIndex[1]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=25
update matchIndex[0]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24}]
------------------------------------------------------
client write log 3705553738914457197 (index 25) to leader 2
flag 22468 term 3 leader 2 nextIndex[0]: 25  matchIndex[0]: 24
[{3705553738914457197 3 25}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
flag 41796 term 3 leader 2 nextIndex[1]: 25  matchIndex[1]: 24
[{3705553738914457197 3 25}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:24 
server 1 log:
term 3 server 0 AppendEntries true commitIndex:24 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=26
update matchIndex[0]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=26
update matchIndex[1]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
flag 2329 term 3 leader 2 nextIndex[0]: 26  matchIndex[0]: 25
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
flag 99001 term 3 leader 2 nextIndex[1]: 26  matchIndex[1]: 25
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:25 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:25 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=26
update matchIndex[1]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=26
update matchIndex[0]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25}]
------------------------------------------------------
client write log 1147364956830439899 (index 26) to leader 2
flag 90897 term 3 leader 2 nextIndex[0]: 26  matchIndex[0]: 25
[{1147364956830439899 3 26}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
flag 78107 term 3 leader 2 nextIndex[1]: 26  matchIndex[1]: 25
[{1147364956830439899 3 26}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:25 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:25 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=27
update matchIndex[1]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=27
update matchIndex[0]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
flag 18766 term 3 leader 2 nextIndex[0]: 27  matchIndex[0]: 26
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
flag 9531 term 3 leader 2 nextIndex[1]: 27  matchIndex[1]: 26
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:26 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:26 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=27
update matchIndex[1]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=27
update matchIndex[0]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26}]
------------------------------------------------------
client write log 5654359027476750401 (index 27) to leader 2
flag 36132 term 3 leader 2 nextIndex[0]: 27  matchIndex[0]: 26
[{5654359027476750401 3 27}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
flag 51536 term 3 leader 2 nextIndex[1]: 27  matchIndex[1]: 26
[{5654359027476750401 3 27}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:26 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=28
update matchIndex[1]=27
update leader CommitIndex=27
leader log:
term 3 server 0 AppendEntries true commitIndex:26 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=28
update matchIndex[0]=27
update leader CommitIndex=27
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
flag 90875 term 3 leader 2 nextIndex[0]: 28  matchIndex[0]: 27
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
flag 1667 term 3 leader 2 nextIndex[1]: 28  matchIndex[1]: 27
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:27 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:27 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=28
update matchIndex[0]=27
update leader CommitIndex=27
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=28
update matchIndex[1]=27
update leader CommitIndex=27
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27}]
------------------------------------------------------
client write log 3223569471399165974 (index 28) to leader 2
flag 90473 term 3 leader 2 nextIndex[0]: 28  matchIndex[0]: 27
[{3223569471399165974 3 28}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
flag 35388 term 3 leader 2 nextIndex[1]: 28  matchIndex[1]: 27
[{3223569471399165974 3 28}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:27 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:27 
server 0 log:
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=29
update matchIndex[1]=28
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=29
update matchIndex[0]=28
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
flag 66868 term 3 leader 2 nextIndex[0]: 29  matchIndex[0]: 28
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
flag 55734 term 3 leader 2 nextIndex[1]: 29  matchIndex[1]: 28
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:28 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:28 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=29
update matchIndex[1]=28
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=29
update matchIndex[0]=28
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 3 voteFor 2 logs [{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 3 voteFor 2 logs [{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 3 voteFor 2 logs [{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
!!!!!! server 2 crash
flag 42914 term 3 leader 2 nextIndex[0]: 29  matchIndex[0]: 28
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
flag 5491 term 3 leader 2 nextIndex[1]: 29  matchIndex[1]: 28
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 false nextIndex[0] 29->28
------------------------------------------------------
term 4 server 1 vote for server 2
term 4 server 2 get vote from server 1
term 4 server 2 become leader
------------------------------------------------------
term 4 server 0 vote for server 2
term 4 server 2 get outdate rpc reply from server 0
flag 7210 term 4 leader 2 nextIndex[0]: 29  matchIndex[0]: 0
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 19 
------------------------------------------------------
flag 44310 term 4 leader 2 nextIndex[1]: 29  matchIndex[1]: 0
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 19 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=29
update matchIndex[1]=28
update leader CommitIndex=19
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=29
update matchIndex[0]=28
update leader CommitIndex=19
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28}]
------------------------------------------------------
client write log 3602531477738704312 (index 29) to leader 2
flag 80145 term 4 leader 2 nextIndex[0]: 29  matchIndex[0]: 28
[{3602531477738704312 4 29}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 19 
------------------------------------------------------
flag 6357 term 4 leader 2 nextIndex[1]: 29  matchIndex[1]: 28
[{3602531477738704312 4 29}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 19 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28} {3602531477738704312 4 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=30
update matchIndex[1]=29
update leader CommitIndex=29
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28} {3602531477738704312 4 29}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28} {3602531477738704312 4 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=30
update matchIndex[0]=29
update leader CommitIndex=29
leader log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28} {3602531477738704312 4 29}]
------------------------------------------------------
term 4 Server2 start snapshot! index=29
term 4 server2 snapshot success
lastIncludedIndex=29 lastApplied=29 lastIndex=29
-------------------------------------------------------------
flag 66699 term 4 leader 2 nextIndex[0]: 30  matchIndex[0]: 29
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 4 leaderCommit: 29 
------------------------------------------------------
flag 83889 term 4 leader 2 nextIndex[1]: 30  matchIndex[1]: 29
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 4 leaderCommit: 29 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:29 
server 1 log:
term 4 server 0 AppendEntries true commitIndex:29 
server 0 log:
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28} {3602531477738704312 4 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=30
update matchIndex[0]=29
update leader CommitIndex=29
leader log:
[{snapshot 4 29}]
------------------------------------------------------
[{snapshot 2 19} {5426983428239481111 2 20} {2653194176536303810 3 21} {8315554094944452959 3 22} {8236364564341482265 3 23} {5811365552708202423 3 24} {3705553738914457197 3 25} {1147364956830439899 3 26} {5654359027476750401 3 27} {3223569471399165974 3 28} {3602531477738704312 4 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=30
update matchIndex[1]=29
update leader CommitIndex=29
leader log:
[{snapshot 4 29}]
------------------------------------------------------
term 4 Server0 start snapshot! index=29
term 4 server0 snapshot success
lastIncludedIndex=29 lastApplied=29 lastIndex=29
-------------------------------------------------------------
term 4 Server1 start snapshot! index=29
term 4 server1 snapshot success
lastIncludedIndex=29 lastApplied=29 lastIndex=29
-------------------------------------------------------------
client write log 1491603528231983458 (index 30) to leader 2
flag 52453 term 4 leader 2 nextIndex[0]: 30  matchIndex[0]: 29
[{1491603528231983458 4 30}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 4 leaderCommit: 29 
------------------------------------------------------
flag 36856 term 4 leader 2 nextIndex[1]: 30  matchIndex[1]: 29
[{1491603528231983458 4 30}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 4 leaderCommit: 29 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:29 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=31
update matchIndex[1]=30
update leader CommitIndex=30
leader log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:29 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=31
update matchIndex[0]=30
update leader CommitIndex=30
leader log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
flag 7328 term 4 leader 2 nextIndex[0]: 31  matchIndex[0]: 30
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 4 leaderCommit: 30 
------------------------------------------------------
flag 36836 term 4 leader 2 nextIndex[1]: 31  matchIndex[1]: 30
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 4 leaderCommit: 30 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:30 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:30 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=31
update matchIndex[1]=30
update leader CommitIndex=30
leader log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=31
update matchIndex[0]=30
update leader CommitIndex=30
leader log:
[{snapshot 4 29} {1491603528231983458 4 30}]
------------------------------------------------------
client write log 7319113310400564011 (index 31) to leader 2
flag 94451 term 4 leader 2 nextIndex[0]: 31  matchIndex[0]: 30
[{7319113310400564011 4 31}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 4 leaderCommit: 30 
------------------------------------------------------
flag 68840 term 4 leader 2 nextIndex[1]: 31  matchIndex[1]: 30
[{7319113310400564011 4 31}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 4 leaderCommit: 30 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:30 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:30 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=32
update matchIndex[1]=31
update leader CommitIndex=31
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=32
update matchIndex[0]=31
update leader CommitIndex=31
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
flag 63296 term 4 leader 2 nextIndex[0]: 32  matchIndex[0]: 31
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 4 leaderCommit: 31 
------------------------------------------------------
flag 24809 term 4 leader 2 nextIndex[1]: 32  matchIndex[1]: 31
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 4 leaderCommit: 31 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:31 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:31 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=32
update matchIndex[1]=31
update leader CommitIndex=31
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=32
update matchIndex[0]=31
update leader CommitIndex=31
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31}]
------------------------------------------------------
client write log 7334451532489825433 (index 32) to leader 2
flag 1762 term 4 leader 2 nextIndex[0]: 32  matchIndex[0]: 31
[{7334451532489825433 4 32}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 4 leaderCommit: 31 
------------------------------------------------------
flag 85888 term 4 leader 2 nextIndex[1]: 32  matchIndex[1]: 31
[{7334451532489825433 4 32}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 4 leaderCommit: 31 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:31 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:31 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=33
update matchIndex[1]=32
update leader CommitIndex=32
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=33
update matchIndex[0]=32
update leader CommitIndex=32
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
flag 28944 term 4 leader 2 nextIndex[0]: 33  matchIndex[0]: 32
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 4 leaderCommit: 32 
------------------------------------------------------
flag 70011 term 4 leader 2 nextIndex[1]: 33  matchIndex[1]: 32
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 4 leaderCommit: 32 
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:32 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:32 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=33
update matchIndex[0]=32
update leader CommitIndex=32
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=33
update matchIndex[1]=32
update leader CommitIndex=32
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32}]
------------------------------------------------------
client write log 5272491715140408573 (index 33) to leader 2
flag 9890 term 4 leader 2 nextIndex[0]: 33  matchIndex[0]: 32
[{5272491715140408573 4 33}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 4 leaderCommit: 32 
------------------------------------------------------
flag 74130 term 4 leader 2 nextIndex[1]: 33  matchIndex[1]: 32
[{5272491715140408573 4 33}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 4 leaderCommit: 32 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:32 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:32 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=34
update matchIndex[1]=33
update leader CommitIndex=33
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=34
update matchIndex[0]=33
update leader CommitIndex=33
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
------------------------------------------------------
flag 42280 term 4 leader 2 nextIndex[0]: 34  matchIndex[0]: 33
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 4 leaderCommit: 33 
------------------------------------------------------
flag 80996 term 4 leader 2 nextIndex[1]: 34  matchIndex[1]: 33
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 4 leaderCommit: 33 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:33 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
term 4 server 0 AppendEntries true commitIndex:33 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
------------------------------------------------------
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=34
update matchIndex[0]=33
update leader CommitIndex=33
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=34
update matchIndex[1]=33
update leader CommitIndex=33
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33}]
------------------------------------------------------
client write log 8423264258522332027 (index 34) to leader 2
flag 53748 term 4 leader 2 nextIndex[0]: 34  matchIndex[0]: 33
[{8423264258522332027 4 34}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 4 leaderCommit: 33 
------------------------------------------------------
flag 36649 term 4 leader 2 nextIndex[1]: 34  matchIndex[1]: 33
[{8423264258522332027 4 34}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 4 leaderCommit: 33 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:33 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:33 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=35
update matchIndex[1]=34
update leader CommitIndex=34
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=35
update matchIndex[0]=34
update leader CommitIndex=34
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
flag 72222 term 4 leader 2 nextIndex[0]: 35  matchIndex[0]: 34
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
flag 55337 term 4 leader 2 nextIndex[1]: 35  matchIndex[1]: 34
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:34 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=35
update matchIndex[1]=34
update leader CommitIndex=34
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:34 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=35
update matchIndex[0]=34
update leader CommitIndex=34
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34}]
------------------------------------------------------
client write log 7108718440022154484 (index 35) to leader 2
flag 27189 term 4 leader 2 nextIndex[0]: 35  matchIndex[0]: 34
[{7108718440022154484 4 35}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
flag 41192 term 4 leader 2 nextIndex[1]: 35  matchIndex[1]: 34
[{7108718440022154484 4 35}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:34 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=36
update matchIndex[1]=35
update leader CommitIndex=35
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:34 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=36
update matchIndex[0]=35
update leader CommitIndex=35
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
flag 53247 term 4 leader 2 nextIndex[0]: 36  matchIndex[0]: 35
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
flag 18061 term 4 leader 2 nextIndex[1]: 36  matchIndex[1]: 35
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:35 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:35 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=36
update matchIndex[1]=35
update leader CommitIndex=35
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=36
update matchIndex[0]=35
update leader CommitIndex=35
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 false nextIndex[0] 8->7
------------------------------------------------------
client write log 7226192565281066896 (index 36) to leader 2
flag 78541 term 4 leader 2 nextIndex[0]: 36  matchIndex[0]: 35
[{7226192565281066896 4 36}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
flag 54720 term 4 leader 2 nextIndex[1]: 36  matchIndex[1]: 35
[{7226192565281066896 4 36}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:35 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:35 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=37
update matchIndex[1]=36
update leader CommitIndex=36
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=37
update matchIndex[0]=36
update leader CommitIndex=36
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
flag 99567 term 4 leader 2 nextIndex[0]: 37  matchIndex[0]: 36
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
flag 97431 term 4 leader 2 nextIndex[1]: 37  matchIndex[1]: 36
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:36 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=37
update matchIndex[1]=36
update leader CommitIndex=36
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:36 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=37
update matchIndex[0]=36
update leader CommitIndex=36
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36}]
------------------------------------------------------
client write log 4655905366221474022 (index 37) to leader 2
flag 16054 term 4 leader 2 nextIndex[0]: 37  matchIndex[0]: 36
[{4655905366221474022 4 37}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
flag 29548 term 4 leader 2 nextIndex[1]: 37  matchIndex[1]: 36
[{4655905366221474022 4 37}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:36 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=38
update matchIndex[1]=37
update leader CommitIndex=37
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:36 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=38
update matchIndex[0]=37
update leader CommitIndex=37
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
flag 81649 term 4 leader 2 nextIndex[0]: 38  matchIndex[0]: 37
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
flag 58434 term 4 leader 2 nextIndex[1]: 38  matchIndex[1]: 37
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:37 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:37 
server 0 log:
leader 2 sendAppendEntries -> server 1 true
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
update nextIndex[1]=38
update matchIndex[1]=37
update leader CommitIndex=37
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=38
update matchIndex[0]=37
update leader CommitIndex=37
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37}]
------------------------------------------------------
client write log 7545105088211449387 (index 38) to leader 2
flag 56090 term 4 leader 2 nextIndex[0]: 38  matchIndex[0]: 37
[{7545105088211449387 4 38}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
flag 93681 term 4 leader 2 nextIndex[1]: 38  matchIndex[1]: 37
[{7545105088211449387 4 38}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:37 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=39
update matchIndex[1]=38
update leader CommitIndex=38
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:37 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=39
update matchIndex[0]=38
update leader CommitIndex=38
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
flag 68105 term 4 leader 2 nextIndex[0]: 39  matchIndex[0]: 38
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
flag 2230 term 4 leader 2 nextIndex[1]: 39  matchIndex[1]: 38
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:38 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=39
update matchIndex[1]=38
update leader CommitIndex=38
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:38 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=39
update matchIndex[0]=38
update leader CommitIndex=38
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38}]
------------------------------------------------------
client write log 6185573022872990619 (index 39) to leader 2
flag 46467 term 4 leader 2 nextIndex[0]: 39  matchIndex[0]: 38
[{6185573022872990619 4 39}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
flag 1044 term 4 leader 2 nextIndex[1]: 39  matchIndex[1]: 38
[{6185573022872990619 4 39}]
term 4 leader 2 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:38 
server 1 log:
term 4 server 0 AppendEntries true commitIndex:38 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38} {6185573022872990619 4 39}]
------------------------------------------------------
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38} {6185573022872990619 4 39}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=40
update matchIndex[0]=39
update leader CommitIndex=39
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38} {6185573022872990619 4 39}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=40
update matchIndex[1]=39
update leader CommitIndex=39
leader log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38} {6185573022872990619 4 39}]
------------------------------------------------------
term 4 Server2 start snapshot! index=39
term 4 server2 snapshot success
lastIncludedIndex=39 lastApplied=39 lastIndex=39
-------------------------------------------------------------
flag 54152 term 4 leader 2 nextIndex[0]: 40  matchIndex[0]: 39
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
flag 28534 term 4 leader 2 nextIndex[1]: 40  matchIndex[1]: 39
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
term 4 server 1 AppendEntries true commitIndex:39 
server 1 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38} {6185573022872990619 4 39}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=40
update matchIndex[1]=39
update leader CommitIndex=39
leader log:
[{snapshot 4 39}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:39 
server 0 log:
[{snapshot 4 29} {1491603528231983458 4 30} {7319113310400564011 4 31} {7334451532489825433 4 32} {5272491715140408573 4 33} {8423264258522332027 4 34} {7108718440022154484 4 35} {7226192565281066896 4 36} {4655905366221474022 4 37} {7545105088211449387 4 38} {6185573022872990619 4 39}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=40
update matchIndex[0]=39
update leader CommitIndex=39
leader log:
[{snapshot 4 39}]
------------------------------------------------------
term 4 Server0 start snapshot! index=39
term 4 server0 snapshot success
lastIncludedIndex=39 lastApplied=39 lastIndex=39
-------------------------------------------------------------
term 4 Server1 start snapshot! index=39
term 4 server1 snapshot success
lastIncludedIndex=39 lastApplied=39 lastIndex=39
-------------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 4 voteFor 2 logs [{snapshot 4 39}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 4 voteFor 2 logs [{snapshot 4 39}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 4 voteFor 2 logs [{snapshot 4 39}]
!!!!!! server 2 crash
flag 5480 term 4 leader 2 nextIndex[0]: 40  matchIndex[0]: 39
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
flag 88668 term 4 leader 2 nextIndex[1]: 40  matchIndex[1]: 39
[]
term 4 leader 2 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
term 5 server 1 vote for server 2
term 5 server 2 get vote from server 1
term 5 server 2 become leader
------------------------------------------------------
term 5 server 0 vote for server 2
term 5 server 2 get outdate rpc reply from server 0
client write log 31820178607162809 (index 40) to leader 2
flag 37477 term 5 leader 2 nextIndex[0]: 40  matchIndex[0]: 0
[{31820178607162809 5 40}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
flag 84446 term 5 leader 2 nextIndex[1]: 40  matchIndex[1]: 0
[{31820178607162809 5 40}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:39 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=41
update matchIndex[1]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:39 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=41
update matchIndex[0]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
flag 83279 term 5 leader 2 nextIndex[0]: 41  matchIndex[0]: 40
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 5 leaderCommit: 40 
------------------------------------------------------
flag 48225 term 5 leader 2 nextIndex[1]: 41  matchIndex[1]: 40
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 5 leaderCommit: 40 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:40 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=41
update matchIndex[1]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:40 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=41
update matchIndex[0]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {31820178607162809 5 40}]
------------------------------------------------------
client write log 4838062405119829325 (index 41) to leader 2
flag 44135 term 5 leader 2 nextIndex[0]: 41  matchIndex[0]: 40
[{4838062405119829325 5 41}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 5 leaderCommit: 40 
------------------------------------------------------
flag 55233 term 5 leader 2 nextIndex[1]: 41  matchIndex[1]: 40
[{4838062405119829325 5 41}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 5 leaderCommit: 40 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:40 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=42
update matchIndex[1]=41
update leader CommitIndex=41
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:40 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=42
update matchIndex[0]=41
update leader CommitIndex=41
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
flag 26585 term 5 leader 2 nextIndex[0]: 42  matchIndex[0]: 41
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 5 leaderCommit: 41 
------------------------------------------------------
flag 10965 term 5 leader 2 nextIndex[1]: 42  matchIndex[1]: 41
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 5 leaderCommit: 41 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:41 
server 1 log:
term 5 server 0 AppendEntries true commitIndex:41 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=42
update matchIndex[0]=41
update leader CommitIndex=41
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=42
update matchIndex[1]=41
update leader CommitIndex=41
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41}]
------------------------------------------------------
client write log 1041930941182529561 (index 42) to leader 2
flag 35145 term 5 leader 2 nextIndex[0]: 42  matchIndex[0]: 41
[{1041930941182529561 5 42}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 5 leaderCommit: 41 
------------------------------------------------------
flag 92465 term 5 leader 2 nextIndex[1]: 42  matchIndex[1]: 41
[{1041930941182529561 5 42}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 5 leaderCommit: 41 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:41 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=43
update matchIndex[1]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:41 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=43
update matchIndex[0]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
flag 80465 term 5 leader 2 nextIndex[0]: 43  matchIndex[0]: 42
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 5 leaderCommit: 42 
------------------------------------------------------
flag 83278 term 5 leader 2 nextIndex[1]: 43  matchIndex[1]: 42
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 5 leaderCommit: 42 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:42 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=43
update matchIndex[1]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:42 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=43
update matchIndex[0]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42}]
------------------------------------------------------
client write log 6192032202294228343 (index 43) to leader 2
flag 65552 term 5 leader 2 nextIndex[0]: 43  matchIndex[0]: 42
[{6192032202294228343 5 43}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 5 leaderCommit: 42 
------------------------------------------------------
flag 88415 term 5 leader 2 nextIndex[1]: 43  matchIndex[1]: 42
[{6192032202294228343 5 43}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 5 leaderCommit: 42 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:42 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=44
update matchIndex[1]=43
update leader CommitIndex=43
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:42 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=44
update matchIndex[0]=43
update leader CommitIndex=43
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
flag 30899 term 5 leader 2 nextIndex[0]: 44  matchIndex[0]: 43
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
flag 95542 term 5 leader 2 nextIndex[1]: 44  matchIndex[1]: 43
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:43 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=44
update matchIndex[1]=43
update leader CommitIndex=43
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:43 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=44
update matchIndex[0]=43
update leader CommitIndex=43
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43}]
------------------------------------------------------
client write log 3837336743303199505 (index 44) to leader 2
leader 2 sendAppendEntries -> server 0 false nextIndex[0] 40->39
------------------------------------------------------
flag 95429 term 5 leader 2 nextIndex[0]: 44  matchIndex[0]: 43
[{3837336743303199505 5 44}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
flag 64880 term 5 leader 2 nextIndex[1]: 44  matchIndex[1]: 43
[{3837336743303199505 5 44}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:43 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=45
update matchIndex[1]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
term 5 server 0 AppendEntries true commitIndex:43 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
------------------------------------------------------
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=45
update matchIndex[0]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
------------------------------------------------------
flag 64781 term 5 leader 2 nextIndex[0]: 45  matchIndex[0]: 44
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
flag 84953 term 5 leader 2 nextIndex[1]: 45  matchIndex[1]: 44
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:44 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:44 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=45
update matchIndex[1]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=45
update matchIndex[0]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44}]
------------------------------------------------------
client write log 7189371653766279304 (index 45) to leader 2
flag 98701 term 5 leader 2 nextIndex[0]: 45  matchIndex[0]: 44
[{7189371653766279304 5 45}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
flag 94479 term 5 leader 2 nextIndex[1]: 45  matchIndex[1]: 44
[{7189371653766279304 5 45}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:44 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=46
update matchIndex[1]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:44 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=46
update matchIndex[0]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
------------------------------------------------------
flag 40795 term 5 leader 2 nextIndex[0]: 46  matchIndex[0]: 45
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
flag 46655 term 5 leader 2 nextIndex[1]: 46  matchIndex[1]: 45
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:45 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:45 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=46
update matchIndex[1]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
------------------------------------------------------
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=46
update matchIndex[0]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45}]
------------------------------------------------------
client write log 3512364225906331072 (index 46) to leader 2
flag 24415 term 5 leader 2 nextIndex[0]: 46  matchIndex[0]: 45
[{3512364225906331072 5 46}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
flag 34599 term 5 leader 2 nextIndex[1]: 46  matchIndex[1]: 45
[{3512364225906331072 5 46}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:45 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=47
update matchIndex[1]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:45 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=47
update matchIndex[0]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
flag 58853 term 5 leader 2 nextIndex[0]: 47  matchIndex[0]: 46
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
flag 71616 term 5 leader 2 nextIndex[1]: 47  matchIndex[1]: 46
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:46 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=47
update matchIndex[1]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:46 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=47
update matchIndex[0]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46}]
------------------------------------------------------
client write log 8469632755224781934 (index 47) to leader 2
flag 60158 term 5 leader 2 nextIndex[0]: 47  matchIndex[0]: 46
[{8469632755224781934 5 47}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
flag 37384 term 5 leader 2 nextIndex[1]: 47  matchIndex[1]: 46
[{8469632755224781934 5 47}]
term 5 leader 2 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:46 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:46 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=48
update matchIndex[1]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=48
update matchIndex[0]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
flag 17961 term 5 leader 2 nextIndex[0]: 48  matchIndex[0]: 47
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
flag 82765 term 5 leader 2 nextIndex[1]: 48  matchIndex[1]: 47
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
term 5 server 1 AppendEntries true commitIndex:47 
server 1 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:47 
server 0 log:
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=48
update matchIndex[1]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=48
update matchIndex[0]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 5 voteFor 2 logs [{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 5 voteFor 2 logs [{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 5 voteFor 2 logs [{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47}]
!!!!!! server 2 crash
flag 21597 term 5 leader 2 nextIndex[0]: 48  matchIndex[0]: 47
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
flag 78322 term 5 leader 2 nextIndex[1]: 48  matchIndex[1]: 47
[]
term 5 leader 2 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
term 6 server 2 vote for server 1
term 6 server 1 get vote from server 2
term 6 server 0 vote for server 1
term 6 server 1 become leader
------------------------------------------------------
term 6 server 1 get outdate rpc reply from server 0
client write log 7879839215848594481 (index 48) to leader 1
flag 28075 term 6 leader 1 nextIndex[0]: 48  matchIndex[0]: 0
[{7879839215848594481 6 48}]
term 6 leader 1 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 39 
------------------------------------------------------
flag 30628 term 6 leader 1 nextIndex[2]: 48  matchIndex[2]: 0
[{7879839215848594481 6 48}]
term 6 leader 1 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 39 
------------------------------------------------------
term 6 server 2 AppendEntries true commitIndex:39 
server 2 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=49
update matchIndex[2]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
term 6 server 0 AppendEntries true commitIndex:39 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=49
update matchIndex[0]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
flag 63538 term 6 leader 1 nextIndex[0]: 49  matchIndex[0]: 48
[]
term 6 leader 1 sendAppendEntries PrevLogIndex: 48  PrevLogTerm: 6 leaderCommit: 48 
------------------------------------------------------
flag 73409 term 6 leader 1 nextIndex[2]: 49  matchIndex[2]: 48
[]
term 6 leader 1 sendAppendEntries PrevLogIndex: 48  PrevLogTerm: 6 leaderCommit: 48 
------------------------------------------------------
term 6 server 2 AppendEntries true commitIndex:48 
server 2 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
term 6 server 0 AppendEntries true commitIndex:48 
server 0 log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=49
update matchIndex[2]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=49
update matchIndex[0]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {31820178607162809 5 40} {4838062405119829325 5 41} {1041930941182529561 5 42} {6192032202294228343 5 43} {3837336743303199505 5 44} {7189371653766279304 5 45} {3512364225906331072 5 46} {8469632755224781934 5 47} {7879839215848594481 6 48}]
------------------------------------------------------
  ... Passed --  11.1  3  236   69515   48
--- PASS: TestSnapshotAllCrash2D (11.09s)
PASS
