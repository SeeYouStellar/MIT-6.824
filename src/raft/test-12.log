=== RUN   TestSnapshotAllCrash2D
Test (2D): crash and restart all servers ...
term 1 server 1 vote for server 2
term 1 server 2 get vote from server 1
term 1 server 2 become leader
------------------------------------------------------
term 1 server 0 vote for server 2
term 1 server 2 get outdate rpc reply from server 0
client write log 1779087003309789278 (index 1) to leader 2
flag 82725 term 1 leader 2 nextIndex[0]: 1  matchIndex[0]: 0
[{1779087003309789278 1 1}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 0  PrevLogTerm: 0 leaderCommit: 0 
------------------------------------------------------
flag 69572 term 1 leader 2 nextIndex[1]: 1  matchIndex[1]: 0
[{1779087003309789278 1 1}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 0  PrevLogTerm: 0 leaderCommit: 0 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:0 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=2
update matchIndex[1]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:0 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=2
update matchIndex[0]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
flag 20176 term 1 leader 2 nextIndex[0]: 2  matchIndex[0]: 1
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
flag 40543 term 1 leader 2 nextIndex[1]: 2  matchIndex[1]: 1
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:1 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=2
update matchIndex[1]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:1 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=2
update matchIndex[0]=1
update leader CommitIndex=1
leader log:
[{<nil> 0 0} {1779087003309789278 1 1}]
------------------------------------------------------
client write log 3046226966614637919 (index 2) to leader 2
flag 95762 term 1 leader 2 nextIndex[0]: 2  matchIndex[0]: 1
[{3046226966614637919 1 2}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
flag 97129 term 1 leader 2 nextIndex[1]: 2  matchIndex[1]: 1
[{3046226966614637919 1 2}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 1  PrevLogTerm: 1 leaderCommit: 1 
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:1 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=3
update matchIndex[0]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:1 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=3
update matchIndex[1]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
flag 84651 term 1 leader 2 nextIndex[0]: 3  matchIndex[0]: 2
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
flag 2799 term 1 leader 2 nextIndex[1]: 3  matchIndex[1]: 2
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:2 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=3
update matchIndex[1]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:2 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=3
update matchIndex[0]=2
update leader CommitIndex=2
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2}]
------------------------------------------------------
client write log 7534658456825822451 (index 3) to leader 2
flag 57382 term 1 leader 2 nextIndex[0]: 3  matchIndex[0]: 2
[{7534658456825822451 1 3}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
flag 46652 term 1 leader 2 nextIndex[1]: 3  matchIndex[1]: 2
[{7534658456825822451 1 3}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 2  PrevLogTerm: 1 leaderCommit: 2 
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:2 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:2 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=4
update matchIndex[0]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=4
update matchIndex[1]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
flag 41533 term 1 leader 2 nextIndex[0]: 4  matchIndex[0]: 3
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
flag 85492 term 1 leader 2 nextIndex[1]: 4  matchIndex[1]: 3
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:3 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=4
update matchIndex[1]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:3 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=4
update matchIndex[0]=3
update leader CommitIndex=3
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3}]
------------------------------------------------------
client write log 4617718791431212807 (index 4) to leader 2
flag 54318 term 1 leader 2 nextIndex[0]: 4  matchIndex[0]: 3
[{4617718791431212807 1 4}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
flag 81960 term 1 leader 2 nextIndex[1]: 4  matchIndex[1]: 3
[{4617718791431212807 1 4}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 3  PrevLogTerm: 1 leaderCommit: 3 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:3 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=5
update matchIndex[1]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:3 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=5
update matchIndex[0]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
flag 59286 term 1 leader 2 nextIndex[0]: 5  matchIndex[0]: 4
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
flag 75392 term 1 leader 2 nextIndex[1]: 5  matchIndex[1]: 4
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:4 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:4 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=5
update matchIndex[1]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=5
update matchIndex[0]=4
update leader CommitIndex=4
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4}]
------------------------------------------------------
client write log 2138237128130157269 (index 5) to leader 2
flag 15927 term 1 leader 2 nextIndex[0]: 5  matchIndex[0]: 4
[{2138237128130157269 1 5}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
flag 27405 term 1 leader 2 nextIndex[1]: 5  matchIndex[1]: 4
[{2138237128130157269 1 5}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 4  PrevLogTerm: 1 leaderCommit: 4 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:4 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:4 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=6
update matchIndex[1]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=6
update matchIndex[0]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
flag 13515 term 1 leader 2 nextIndex[0]: 6  matchIndex[0]: 5
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
flag 46523 term 1 leader 2 nextIndex[1]: 6  matchIndex[1]: 5
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:5 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=6
update matchIndex[1]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:5 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=6
update matchIndex[0]=5
update leader CommitIndex=5
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5}]
------------------------------------------------------
client write log 7256763169036386897 (index 6) to leader 2
flag 13791 term 1 leader 2 nextIndex[0]: 6  matchIndex[0]: 5
[{7256763169036386897 1 6}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
flag 45672 term 1 leader 2 nextIndex[1]: 6  matchIndex[1]: 5
[{7256763169036386897 1 6}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 5  PrevLogTerm: 1 leaderCommit: 5 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:5 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=7
update matchIndex[1]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:5 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=7
update matchIndex[0]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
flag 99133 term 1 leader 2 nextIndex[0]: 7  matchIndex[0]: 6
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
flag 34045 term 1 leader 2 nextIndex[1]: 7  matchIndex[1]: 6
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:6 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:6 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=7
update matchIndex[1]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=7
update matchIndex[0]=6
update leader CommitIndex=6
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6}]
------------------------------------------------------
client write log 4096005929503518763 (index 7) to leader 2
flag 74272 term 1 leader 2 nextIndex[0]: 7  matchIndex[0]: 6
[{4096005929503518763 1 7}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
flag 74086 term 1 leader 2 nextIndex[1]: 7  matchIndex[1]: 6
[{4096005929503518763 1 7}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 6  PrevLogTerm: 1 leaderCommit: 6 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:6 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:6 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=8
update matchIndex[1]=7
update leader CommitIndex=7
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
------------------------------------------------------
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=8
update matchIndex[0]=7
update leader CommitIndex=7
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
------------------------------------------------------
flag 78852 term 1 leader 2 nextIndex[0]: 8  matchIndex[0]: 7
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
flag 24408 term 1 leader 2 nextIndex[1]: 8  matchIndex[1]: 7
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:7 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:7 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=8
update matchIndex[1]=7
update leader CommitIndex=7
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=8
update matchIndex[0]=7
update leader CommitIndex=7
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7}]
------------------------------------------------------
client write log 4258317583203178982 (index 8) to leader 2
flag 55169 term 1 leader 2 nextIndex[0]: 8  matchIndex[0]: 7
[{4258317583203178982 1 8}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
flag 80393 term 1 leader 2 nextIndex[1]: 8  matchIndex[1]: 7
[{4258317583203178982 1 8}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 7  PrevLogTerm: 1 leaderCommit: 7 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:7 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=9
update matchIndex[1]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:7 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=9
update matchIndex[0]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
flag 89446 term 1 leader 2 nextIndex[0]: 9  matchIndex[0]: 8
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 1 leaderCommit: 8 
------------------------------------------------------
flag 71026 term 1 leader 2 nextIndex[1]: 9  matchIndex[1]: 8
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 1 leaderCommit: 8 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:8 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=9
update matchIndex[1]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:8 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=9
update matchIndex[0]=8
update leader CommitIndex=8
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8}]
------------------------------------------------------
client write log 7030750042864578638 (index 9) to leader 2
flag 24021 term 1 leader 2 nextIndex[0]: 9  matchIndex[0]: 8
[{7030750042864578638 1 9}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 1 leaderCommit: 8 
------------------------------------------------------
flag 55372 term 1 leader 2 nextIndex[1]: 9  matchIndex[1]: 8
[{7030750042864578638 1 9}]
term 1 leader 2 sendAppendEntries PrevLogIndex: 8  PrevLogTerm: 1 leaderCommit: 8 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:8 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8} {7030750042864578638 1 9}]
------------------------------------------------------
term 1 server 0 AppendEntries true commitIndex:8 
server 0 log:
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=10
update matchIndex[1]=9
update leader CommitIndex=9
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8} {7030750042864578638 1 9}]
------------------------------------------------------
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8} {7030750042864578638 1 9}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=10
update matchIndex[0]=9
update leader CommitIndex=9
leader log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8} {7030750042864578638 1 9}]
------------------------------------------------------
term 1 Server2 start snapshot! index=9
term 1 server2 snapshot success
lastIncludedIndex=9 lastApplied=9 lastIndex=9
-------------------------------------------------------------
flag 76824 term 1 leader 2 nextIndex[0]: 10  matchIndex[0]: 9
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
flag 59532 term 1 leader 2 nextIndex[1]: 10  matchIndex[1]: 9
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
term 1 server 1 AppendEntries true commitIndex:9 
server 1 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8} {7030750042864578638 1 9}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=10
update matchIndex[1]=9
update leader CommitIndex=9
leader log:
term 1 server 0 AppendEntries true commitIndex:9 
server 0 log:
[{<nil> 0 0} {1779087003309789278 1 1} {3046226966614637919 1 2} {7534658456825822451 1 3} {4617718791431212807 1 4} {2138237128130157269 1 5} {7256763169036386897 1 6} {4096005929503518763 1 7} {4258317583203178982 1 8} {7030750042864578638 1 9}]
------------------------------------------------------
[{snapshot 1 9}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=10
update matchIndex[0]=9
update leader CommitIndex=9
leader log:
[{snapshot 1 9}]
------------------------------------------------------
term 1 Server1 start snapshot! index=9
term 1 server1 snapshot success
lastIncludedIndex=9 lastApplied=9 lastIndex=9
-------------------------------------------------------------
term 1 Server0 start snapshot! index=9
term 1 server0 snapshot success
lastIncludedIndex=9 lastApplied=9 lastIndex=9
-------------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 1 voteFor 2 logs [{snapshot 1 9}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 1 voteFor 2 logs [{snapshot 1 9}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 1 voteFor 2 logs [{snapshot 1 9}]
!!!!!! server 2 crash
flag 66674 term 1 leader 2 nextIndex[0]: 10  matchIndex[0]: 9
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
flag 10434 term 1 leader 2 nextIndex[1]: 10  matchIndex[1]: 9
[]
term 1 leader 2 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 false nextIndex[0] 10->9
------------------------------------------------------
term 2 server 2 vote for server 0
term 2 server 0 get vote from server 2
term 2 server 0 become leader
------------------------------------------------------
term 2 server 1 vote for server 0
term 2 server 0 get outdate rpc reply from server 1
flag 11807 term 2 leader 0 nextIndex[1]: 10  matchIndex[1]: 0
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
flag 62903 term 2 leader 0 nextIndex[2]: 10  matchIndex[2]: 0
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:9 
server 2 log:
[{snapshot 1 9}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=10
update matchIndex[2]=9
update leader CommitIndex=9
leader log:
[{snapshot 1 9}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:9 
server 1 log:
[{snapshot 1 9}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=10
update matchIndex[1]=9
update leader CommitIndex=9
leader log:
[{snapshot 1 9}]
------------------------------------------------------
client write log 767014515439734662 (index 10) to leader 0
flag 2373 term 2 leader 0 nextIndex[1]: 10  matchIndex[1]: 9
[{767014515439734662 2 10}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
flag 11751 term 2 leader 0 nextIndex[2]: 10  matchIndex[2]: 9
[{767014515439734662 2 10}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 9  PrevLogTerm: 1 leaderCommit: 9 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:9 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:9 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=11
update matchIndex[2]=10
update leader CommitIndex=10
leader log:
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=11
update matchIndex[1]=10
update leader CommitIndex=10
leader log:
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
flag 92889 term 2 leader 0 nextIndex[1]: 11  matchIndex[1]: 10
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
flag 39243 term 2 leader 0 nextIndex[2]: 11  matchIndex[2]: 10
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:10 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=11
update matchIndex[2]=10
update leader CommitIndex=10
leader log:
term 2 server 1 AppendEntries true commitIndex:10 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=11
update matchIndex[1]=10
update leader CommitIndex=10
leader log:
[{snapshot 1 9} {767014515439734662 2 10}]
------------------------------------------------------
client write log 3896531328353462493 (index 11) to leader 0
flag 32752 term 2 leader 0 nextIndex[1]: 11  matchIndex[1]: 10
[{3896531328353462493 2 11}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
flag 55872 term 2 leader 0 nextIndex[2]: 11  matchIndex[2]: 10
[{3896531328353462493 2 11}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 10  PrevLogTerm: 2 leaderCommit: 10 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:10 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=12
update matchIndex[1]=11
update leader CommitIndex=11
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:10 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=12
update matchIndex[2]=11
update leader CommitIndex=11
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
flag 29544 term 2 leader 0 nextIndex[1]: 12  matchIndex[1]: 11
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
flag 29706 term 2 leader 0 nextIndex[2]: 12  matchIndex[2]: 11
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:11 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=12
update matchIndex[2]=11
update leader CommitIndex=11
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:11 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=12
update matchIndex[1]=11
update leader CommitIndex=11
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11}]
------------------------------------------------------
client write log 1858852655325126030 (index 12) to leader 0
flag 65207 term 2 leader 0 nextIndex[1]: 12  matchIndex[1]: 11
[{1858852655325126030 2 12}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
flag 22046 term 2 leader 0 nextIndex[2]: 12  matchIndex[2]: 11
[{1858852655325126030 2 12}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 11  PrevLogTerm: 2 leaderCommit: 11 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:11 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:11 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=13
update matchIndex[1]=12
update leader CommitIndex=12
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=13
update matchIndex[2]=12
update leader CommitIndex=12
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
flag 60856 term 2 leader 0 nextIndex[1]: 13  matchIndex[1]: 12
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
flag 90794 term 2 leader 0 nextIndex[2]: 13  matchIndex[2]: 12
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:12 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=13
update matchIndex[2]=12
update leader CommitIndex=12
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:12 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=13
update matchIndex[1]=12
update leader CommitIndex=12
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12}]
------------------------------------------------------
client write log 2995213659883047544 (index 13) to leader 0
flag 88455 term 2 leader 0 nextIndex[1]: 13  matchIndex[1]: 12
[{2995213659883047544 2 13}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
flag 78533 term 2 leader 0 nextIndex[2]: 13  matchIndex[2]: 12
[{2995213659883047544 2 13}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 12  PrevLogTerm: 2 leaderCommit: 12 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:12 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:12 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=14
update matchIndex[2]=13
update leader CommitIndex=13
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=14
update matchIndex[1]=13
update leader CommitIndex=13
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
flag 24628 term 2 leader 0 nextIndex[1]: 14  matchIndex[1]: 13
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
flag 81287 term 2 leader 0 nextIndex[2]: 14  matchIndex[2]: 13
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:13 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:13 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=14
update matchIndex[1]=13
update leader CommitIndex=13
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=14
update matchIndex[2]=13
update leader CommitIndex=13
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13}]
------------------------------------------------------
client write log 6514898179348854374 (index 14) to leader 0
flag 5527 term 2 leader 0 nextIndex[1]: 14  matchIndex[1]: 13
[{6514898179348854374 2 14}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
flag 83955 term 2 leader 0 nextIndex[2]: 14  matchIndex[2]: 13
[{6514898179348854374 2 14}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 13  PrevLogTerm: 2 leaderCommit: 13 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:13 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:13 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=15
update matchIndex[1]=14
update leader CommitIndex=14
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=15
update matchIndex[2]=14
update leader CommitIndex=14
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
flag 70310 term 2 leader 0 nextIndex[1]: 15  matchIndex[1]: 14
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
flag 13842 term 2 leader 0 nextIndex[2]: 15  matchIndex[2]: 14
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:14 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=15
update matchIndex[2]=14
update leader CommitIndex=14
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:14 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=15
update matchIndex[1]=14
update leader CommitIndex=14
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14}]
------------------------------------------------------
client write log 2850881280244507522 (index 15) to leader 0
flag 43444 term 2 leader 0 nextIndex[1]: 15  matchIndex[1]: 14
[{2850881280244507522 2 15}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
flag 71415 term 2 leader 0 nextIndex[2]: 15  matchIndex[2]: 14
[{2850881280244507522 2 15}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 14  PrevLogTerm: 2 leaderCommit: 14 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:14 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=16
update matchIndex[2]=15
update leader CommitIndex=15
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:14 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=16
update matchIndex[1]=15
update leader CommitIndex=15
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
flag 45027 term 2 leader 0 nextIndex[1]: 16  matchIndex[1]: 15
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
flag 36150 term 2 leader 0 nextIndex[2]: 16  matchIndex[2]: 15
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:15 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=16
update matchIndex[2]=15
update leader CommitIndex=15
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:15 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=16
update matchIndex[1]=15
update leader CommitIndex=15
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15}]
------------------------------------------------------
client write log 6853608274377020352 (index 16) to leader 0
flag 9380 term 2 leader 0 nextIndex[1]: 16  matchIndex[1]: 15
[{6853608274377020352 2 16}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
flag 94432 term 2 leader 0 nextIndex[2]: 16  matchIndex[2]: 15
[{6853608274377020352 2 16}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 15  PrevLogTerm: 2 leaderCommit: 15 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:15 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:15 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=17
update matchIndex[2]=16
update leader CommitIndex=16
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=17
update matchIndex[1]=16
update leader CommitIndex=16
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
flag 5634 term 2 leader 0 nextIndex[1]: 17  matchIndex[1]: 16
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
flag 24773 term 2 leader 0 nextIndex[2]: 17  matchIndex[2]: 16
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:16 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=17
update matchIndex[2]=16
update leader CommitIndex=16
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:16 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=17
update matchIndex[1]=16
update leader CommitIndex=16
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16}]
------------------------------------------------------
client write log 5691975384165892944 (index 17) to leader 0
flag 78475 term 2 leader 0 nextIndex[1]: 17  matchIndex[1]: 16
[{5691975384165892944 2 17}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
flag 21495 term 2 leader 0 nextIndex[2]: 17  matchIndex[2]: 16
[{5691975384165892944 2 17}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 16  PrevLogTerm: 2 leaderCommit: 16 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:16 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:16 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=18
update matchIndex[2]=17
update leader CommitIndex=17
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=18
update matchIndex[1]=17
update leader CommitIndex=17
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
flag 11790 term 2 leader 0 nextIndex[1]: 18  matchIndex[1]: 17
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
flag 62623 term 2 leader 0 nextIndex[2]: 18  matchIndex[2]: 17
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:17 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:17 
server 2 log:
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=18
update matchIndex[1]=17
update leader CommitIndex=17
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=18
update matchIndex[2]=17
update leader CommitIndex=17
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17}]
------------------------------------------------------
client write log 8031921609288086944 (index 18) to leader 0
flag 93382 term 2 leader 0 nextIndex[1]: 18  matchIndex[1]: 17
[{8031921609288086944 2 18}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
flag 39172 term 2 leader 0 nextIndex[2]: 18  matchIndex[2]: 17
[{8031921609288086944 2 18}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 17  PrevLogTerm: 2 leaderCommit: 17 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:17 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:17 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=19
update matchIndex[1]=18
update leader CommitIndex=18
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=19
update matchIndex[2]=18
update leader CommitIndex=18
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
flag 33524 term 2 leader 0 nextIndex[1]: 19  matchIndex[1]: 18
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
flag 82654 term 2 leader 0 nextIndex[2]: 19  matchIndex[2]: 18
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:18 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=19
update matchIndex[2]=18
update leader CommitIndex=18
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:18 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=19
update matchIndex[1]=18
update leader CommitIndex=18
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18}]
------------------------------------------------------
client write log 6508856622112149799 (index 19) to leader 0
flag 45744 term 2 leader 0 nextIndex[1]: 19  matchIndex[1]: 18
[{6508856622112149799 2 19}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
flag 79577 term 2 leader 0 nextIndex[2]: 19  matchIndex[2]: 18
[{6508856622112149799 2 19}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 18  PrevLogTerm: 2 leaderCommit: 18 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:18 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18} {6508856622112149799 2 19}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:18 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18} {6508856622112149799 2 19}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=20
update matchIndex[2]=19
update leader CommitIndex=19
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18} {6508856622112149799 2 19}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=20
update matchIndex[1]=19
update leader CommitIndex=19
leader log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18} {6508856622112149799 2 19}]
------------------------------------------------------
term 2 Server0 start snapshot! index=19
term 2 server0 snapshot success
lastIncludedIndex=19 lastApplied=19 lastIndex=19
-------------------------------------------------------------
flag 40855 term 2 leader 0 nextIndex[1]: 20  matchIndex[1]: 19
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 20054 term 2 leader 0 nextIndex[2]: 20  matchIndex[2]: 19
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18} {6508856622112149799 2 19}]
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:19 
server 2 log:
[{snapshot 1 9} {767014515439734662 2 10} {3896531328353462493 2 11} {1858852655325126030 2 12} {2995213659883047544 2 13} {6514898179348854374 2 14} {2850881280244507522 2 15} {6853608274377020352 2 16} {5691975384165892944 2 17} {8031921609288086944 2 18} {6508856622112149799 2 19}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=20
update matchIndex[1]=19
update leader CommitIndex=19
leader log:
[{snapshot 2 19}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=20
update matchIndex[2]=19
update leader CommitIndex=19
leader log:
[{snapshot 2 19}]
------------------------------------------------------
term 2 Server2 start snapshot! index=19
term 2 Server1 start snapshot! index=19
term 2 server1 snapshot success
lastIncludedIndex=19 lastApplied=19 lastIndex=19
-------------------------------------------------------------
term 2 server2 snapshot success
lastIncludedIndex=19 lastApplied=19 lastIndex=19
-------------------------------------------------------------
client write log 3801375666891506961 (index 20) to leader 0
flag 38458 term 2 leader 0 nextIndex[1]: 20  matchIndex[1]: 19
[{3801375666891506961 2 20}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 49827 term 2 leader 0 nextIndex[2]: 20  matchIndex[2]: 19
[{3801375666891506961 2 20}]
term 2 leader 0 sendAppendEntries PrevLogIndex: 19  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:19 
server 2 log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=21
update matchIndex[2]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=21
update matchIndex[1]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
flag 60135 term 2 leader 0 nextIndex[1]: 21  matchIndex[1]: 20
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 20 
------------------------------------------------------
flag 43095 term 2 leader 0 nextIndex[2]: 21  matchIndex[2]: 20
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 20 
------------------------------------------------------
term 2 server 2 AppendEntries true commitIndex:20 
server 2 log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=21
update matchIndex[2]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
term 2 server 1 AppendEntries true commitIndex:20 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=21
update matchIndex[1]=20
update leader CommitIndex=20
leader log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 2 voteFor 0 logs [{snapshot 2 19} {3801375666891506961 2 20}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 2 voteFor 0 logs [{snapshot 2 19} {3801375666891506961 2 20}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 2 voteFor 0 logs [{snapshot 2 19} {3801375666891506961 2 20}]
!!!!!! server 2 crash
flag 6352 term 2 leader 0 nextIndex[1]: 21  matchIndex[1]: 20
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 20 
------------------------------------------------------
flag 9839 term 2 leader 0 nextIndex[2]: 21  matchIndex[2]: 20
[]
term 2 leader 0 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 20 
------------------------------------------------------
term 3 server 1 vote for server 2
term 3 server 0 vote for server 2
term 3 server 2 get vote from server 0
term 3 server 2 become leader
------------------------------------------------------
term 3 server 2 get outdate rpc reply from server 1
flag 60082 term 3 leader 2 nextIndex[0]: 21  matchIndex[0]: 0
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 6165 term 3 leader 2 nextIndex[1]: 21  matchIndex[1]: 0
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=21
update matchIndex[0]=20
update leader CommitIndex=19
leader log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=21
update matchIndex[1]=20
update leader CommitIndex=19
leader log:
[{snapshot 2 19} {3801375666891506961 2 20}]
------------------------------------------------------
client write log 5916934465151402643 (index 21) to leader 2
flag 45902 term 3 leader 2 nextIndex[0]: 21  matchIndex[0]: 20
[{5916934465151402643 3 21}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
flag 12239 term 3 leader 2 nextIndex[1]: 21  matchIndex[1]: 20
[{5916934465151402643 3 21}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 20  PrevLogTerm: 2 leaderCommit: 19 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:19 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:19 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=22
update matchIndex[1]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=22
update matchIndex[0]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
flag 31958 term 3 leader 2 nextIndex[0]: 22  matchIndex[0]: 21
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
flag 11620 term 3 leader 2 nextIndex[1]: 22  matchIndex[1]: 21
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:21 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:21 
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=22
update matchIndex[0]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=22
update matchIndex[1]=21
update leader CommitIndex=21
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21}]
------------------------------------------------------
client write log 2109381050244890796 (index 22) to leader 2
leader 2 sendAppendEntries -> server 1 false nextIndex[1] 10->9
------------------------------------------------------
flag 4225 term 3 leader 2 nextIndex[0]: 22  matchIndex[0]: 21
[{2109381050244890796 3 22}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
flag 71465 term 3 leader 2 nextIndex[1]: 22  matchIndex[1]: 21
[{2109381050244890796 3 22}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 21  PrevLogTerm: 3 leaderCommit: 21 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:21 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:21 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=23
update matchIndex[0]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=23
update matchIndex[1]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
flag 63387 term 3 leader 2 nextIndex[0]: 23  matchIndex[0]: 22
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
flag 69194 term 3 leader 2 nextIndex[1]: 23  matchIndex[1]: 22
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:22 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=23
update matchIndex[0]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:22 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=23
update matchIndex[1]=22
update leader CommitIndex=22
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22}]
------------------------------------------------------
client write log 7707872496136265111 (index 23) to leader 2
flag 25241 term 3 leader 2 nextIndex[0]: 23  matchIndex[0]: 22
[{7707872496136265111 3 23}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
flag 65245 term 3 leader 2 nextIndex[1]: 23  matchIndex[1]: 22
[{7707872496136265111 3 23}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 22  PrevLogTerm: 3 leaderCommit: 22 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:22 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:22 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=24
update matchIndex[1]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=24
update matchIndex[0]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
flag 75551 term 3 leader 2 nextIndex[0]: 24  matchIndex[0]: 23
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
flag 14253 term 3 leader 2 nextIndex[1]: 24  matchIndex[1]: 23
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:23 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=24
update matchIndex[1]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:23 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=24
update matchIndex[0]=23
update leader CommitIndex=23
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23}]
------------------------------------------------------
client write log 2695285274973616519 (index 24) to leader 2
flag 9700 term 3 leader 2 nextIndex[0]: 24  matchIndex[0]: 23
[{2695285274973616519 3 24}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
flag 20765 term 3 leader 2 nextIndex[1]: 24  matchIndex[1]: 23
[{2695285274973616519 3 24}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 23  PrevLogTerm: 3 leaderCommit: 23 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:23 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:23 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=25
update matchIndex[1]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=25
update matchIndex[0]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
flag 59636 term 3 leader 2 nextIndex[0]: 25  matchIndex[0]: 24
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
flag 69305 term 3 leader 2 nextIndex[1]: 25  matchIndex[1]: 24
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:24 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=25
update matchIndex[0]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:24 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=25
update matchIndex[1]=24
update leader CommitIndex=24
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24}]
------------------------------------------------------
client write log 7841748014402548677 (index 25) to leader 2
flag 65039 term 3 leader 2 nextIndex[0]: 25  matchIndex[0]: 24
[{7841748014402548677 3 25}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
flag 60438 term 3 leader 2 nextIndex[1]: 25  matchIndex[1]: 24
[{7841748014402548677 3 25}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 24  PrevLogTerm: 3 leaderCommit: 24 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:24 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=26
update matchIndex[1]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:24 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=26
update matchIndex[0]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
flag 72938 term 3 leader 2 nextIndex[0]: 26  matchIndex[0]: 25
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
flag 44646 term 3 leader 2 nextIndex[1]: 26  matchIndex[1]: 25
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:25 
server 1 log:
term 3 server 0 AppendEntries true commitIndex:25 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=26
update matchIndex[0]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=26
update matchIndex[1]=25
update leader CommitIndex=25
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25}]
------------------------------------------------------
client write log 2854539822501926562 (index 26) to leader 2
flag 26279 term 3 leader 2 nextIndex[0]: 26  matchIndex[0]: 25
[{2854539822501926562 3 26}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
flag 55590 term 3 leader 2 nextIndex[1]: 26  matchIndex[1]: 25
[{2854539822501926562 3 26}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 25  PrevLogTerm: 3 leaderCommit: 25 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:25 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=27
update matchIndex[1]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:25 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=27
update matchIndex[0]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
flag 41921 term 3 leader 2 nextIndex[0]: 27  matchIndex[0]: 26
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
flag 58378 term 3 leader 2 nextIndex[1]: 27  matchIndex[1]: 26
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:26 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=27
update matchIndex[1]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:26 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=27
update matchIndex[0]=26
update leader CommitIndex=26
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26}]
------------------------------------------------------
client write log 3095754485187181850 (index 27) to leader 2
flag 43211 term 3 leader 2 nextIndex[0]: 27  matchIndex[0]: 26
[{3095754485187181850 3 27}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
flag 43284 term 3 leader 2 nextIndex[1]: 27  matchIndex[1]: 26
[{3095754485187181850 3 27}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 26  PrevLogTerm: 3 leaderCommit: 26 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:26 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:26 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=28
update matchIndex[0]=27
update leader CommitIndex=27
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=28
update matchIndex[1]=27
update leader CommitIndex=27
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
flag 68631 term 3 leader 2 nextIndex[0]: 28  matchIndex[0]: 27
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
flag 3644 term 3 leader 2 nextIndex[1]: 28  matchIndex[1]: 27
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:27 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:27 
server 0 log:
leader 2 sendAppendEntries -> server 1 true
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
update nextIndex[1]=28
update matchIndex[1]=27
update leader CommitIndex=27
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=28
update matchIndex[0]=27
update leader CommitIndex=27
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27}]
------------------------------------------------------
client write log 1592085757182463520 (index 28) to leader 2
flag 79828 term 3 leader 2 nextIndex[0]: 28  matchIndex[0]: 27
[{1592085757182463520 3 28}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
flag 67869 term 3 leader 2 nextIndex[1]: 28  matchIndex[1]: 27
[{1592085757182463520 3 28}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 27  PrevLogTerm: 3 leaderCommit: 27 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:27 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=29
update matchIndex[1]=28
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:27 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=29
update matchIndex[0]=28
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
flag 37974 term 3 leader 2 nextIndex[0]: 29  matchIndex[0]: 28
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
flag 46754 term 3 leader 2 nextIndex[1]: 29  matchIndex[1]: 28
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:28 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=29
update matchIndex[1]=28
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:28 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=29
update matchIndex[0]=28
update leader CommitIndex=28
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28}]
------------------------------------------------------
client write log 4214880557984797773 (index 29) to leader 2
flag 87561 term 3 leader 2 nextIndex[0]: 29  matchIndex[0]: 28
[{4214880557984797773 3 29}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
flag 61133 term 3 leader 2 nextIndex[1]: 29  matchIndex[1]: 28
[{4214880557984797773 3 29}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 28  PrevLogTerm: 3 leaderCommit: 28 
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:28 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28} {4214880557984797773 3 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=30
update matchIndex[0]=29
update leader CommitIndex=29
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28} {4214880557984797773 3 29}]
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:28 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28} {4214880557984797773 3 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=30
update matchIndex[1]=29
update leader CommitIndex=29
leader log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28} {4214880557984797773 3 29}]
------------------------------------------------------
term 3 Server2 start snapshot! index=29
term 3 server2 snapshot success
lastIncludedIndex=29 lastApplied=29 lastIndex=29
-------------------------------------------------------------
flag 27926 term 3 leader 2 nextIndex[0]: 30  matchIndex[0]: 29
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 3 leaderCommit: 29 
------------------------------------------------------
flag 21626 term 3 leader 2 nextIndex[1]: 30  matchIndex[1]: 29
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 3 leaderCommit: 29 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:29 
server 1 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28} {4214880557984797773 3 29}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:29 
server 0 log:
[{snapshot 2 19} {3801375666891506961 2 20} {5916934465151402643 3 21} {2109381050244890796 3 22} {7707872496136265111 3 23} {2695285274973616519 3 24} {7841748014402548677 3 25} {2854539822501926562 3 26} {3095754485187181850 3 27} {1592085757182463520 3 28} {4214880557984797773 3 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=30
update matchIndex[1]=29
update leader CommitIndex=29
leader log:
[{snapshot 3 29}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=30
update matchIndex[0]=29
update leader CommitIndex=29
leader log:
[{snapshot 3 29}]
------------------------------------------------------
term 3 Server1 start snapshot! index=29
term 3 Server0 start snapshot! index=29
term 3 server1 snapshot success
lastIncludedIndex=29 lastApplied=29 lastIndex=29
-------------------------------------------------------------
term 3 server0 snapshot success
lastIncludedIndex=29 lastApplied=29 lastIndex=29
-------------------------------------------------------------
client write log 8128596849167032915 (index 30) to leader 2
flag 48104 term 3 leader 2 nextIndex[0]: 30  matchIndex[0]: 29
[{8128596849167032915 3 30}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 3 leaderCommit: 29 
------------------------------------------------------
flag 10565 term 3 leader 2 nextIndex[1]: 30  matchIndex[1]: 29
[{8128596849167032915 3 30}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 29  PrevLogTerm: 3 leaderCommit: 29 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:29 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=31
update matchIndex[1]=30
update leader CommitIndex=30
leader log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:29 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=31
update matchIndex[0]=30
update leader CommitIndex=30
leader log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
flag 72468 term 3 leader 2 nextIndex[0]: 31  matchIndex[0]: 30
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 3 leaderCommit: 30 
------------------------------------------------------
flag 56998 term 3 leader 2 nextIndex[1]: 31  matchIndex[1]: 30
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 3 leaderCommit: 30 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:30 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:30 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=31
update matchIndex[0]=30
update leader CommitIndex=30
leader log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=31
update matchIndex[1]=30
update leader CommitIndex=30
leader log:
[{snapshot 3 29} {8128596849167032915 3 30}]
------------------------------------------------------
client write log 8827761295312182294 (index 31) to leader 2
flag 29452 term 3 leader 2 nextIndex[0]: 31  matchIndex[0]: 30
[{8827761295312182294 3 31}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 3 leaderCommit: 30 
------------------------------------------------------
flag 95403 term 3 leader 2 nextIndex[1]: 31  matchIndex[1]: 30
[{8827761295312182294 3 31}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 30  PrevLogTerm: 3 leaderCommit: 30 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:30 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=32
update matchIndex[1]=31
update leader CommitIndex=31
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:30 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=32
update matchIndex[0]=31
update leader CommitIndex=31
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
flag 26835 term 3 leader 2 nextIndex[0]: 32  matchIndex[0]: 31
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 3 leaderCommit: 31 
------------------------------------------------------
flag 93205 term 3 leader 2 nextIndex[1]: 32  matchIndex[1]: 31
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 3 leaderCommit: 31 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:31 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=32
update matchIndex[1]=31
update leader CommitIndex=31
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:31 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=32
update matchIndex[0]=31
update leader CommitIndex=31
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31}]
------------------------------------------------------
client write log 6723335458752949 (index 32) to leader 2
flag 34507 term 3 leader 2 nextIndex[0]: 32  matchIndex[0]: 31
[{6723335458752949 3 32}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 3 leaderCommit: 31 
------------------------------------------------------
flag 31600 term 3 leader 2 nextIndex[1]: 32  matchIndex[1]: 31
[{6723335458752949 3 32}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 31  PrevLogTerm: 3 leaderCommit: 31 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:31 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=33
update matchIndex[1]=32
update leader CommitIndex=32
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:31 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=33
update matchIndex[0]=32
update leader CommitIndex=32
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
flag 26841 term 3 leader 2 nextIndex[0]: 33  matchIndex[0]: 32
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 3 leaderCommit: 32 
------------------------------------------------------
flag 47512 term 3 leader 2 nextIndex[1]: 33  matchIndex[1]: 32
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 3 leaderCommit: 32 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:32 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:32 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=33
update matchIndex[0]=32
update leader CommitIndex=32
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=33
update matchIndex[1]=32
update leader CommitIndex=32
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32}]
------------------------------------------------------
client write log 1873898758988989465 (index 33) to leader 2
flag 29914 term 3 leader 2 nextIndex[0]: 33  matchIndex[0]: 32
[{1873898758988989465 3 33}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 3 leaderCommit: 32 
------------------------------------------------------
flag 39977 term 3 leader 2 nextIndex[1]: 33  matchIndex[1]: 32
[{1873898758988989465 3 33}]
term 3 leader 2 sendAppendEntries PrevLogIndex: 32  PrevLogTerm: 3 leaderCommit: 32 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:32 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:32 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=34
update matchIndex[1]=33
update leader CommitIndex=33
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=34
update matchIndex[0]=33
update leader CommitIndex=33
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
flag 1163 term 3 leader 2 nextIndex[0]: 34  matchIndex[0]: 33
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 3 leaderCommit: 33 
------------------------------------------------------
flag 33235 term 3 leader 2 nextIndex[1]: 34  matchIndex[1]: 33
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 3 leaderCommit: 33 
------------------------------------------------------
term 3 server 1 AppendEntries true commitIndex:33 
server 1 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
term 3 server 0 AppendEntries true commitIndex:33 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 1 true
update nextIndex[1]=34
update matchIndex[1]=33
update leader CommitIndex=33
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 true
update nextIndex[0]=34
update matchIndex[0]=33
update leader CommitIndex=33
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 3 voteFor 2 logs [{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 3 voteFor 2 logs [{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 3 voteFor 2 logs [{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33}]
!!!!!! server 2 crash
flag 78041 term 3 leader 2 nextIndex[0]: 34  matchIndex[0]: 33
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 3 leaderCommit: 33 
------------------------------------------------------
flag 19011 term 3 leader 2 nextIndex[1]: 34  matchIndex[1]: 33
[]
term 3 leader 2 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 3 leaderCommit: 33 
------------------------------------------------------
leader 2 sendAppendEntries -> server 0 false nextIndex[0] 34->33
------------------------------------------------------
term 4 server 2 vote for server 1
term 4 server 0 vote for server 1
term 4 server 1 get vote from server 0
term 4 server 1 become leader
------------------------------------------------------
term 4 server 1 get outdate rpc reply from server 2
client write log 3560925300216034928 (index 34) to leader 1
flag 20376 term 4 leader 1 nextIndex[0]: 34  matchIndex[0]: 0
[{3560925300216034928 4 34}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 3 leaderCommit: 29 
------------------------------------------------------
flag 77288 term 4 leader 1 nextIndex[2]: 34  matchIndex[2]: 0
[{3560925300216034928 4 34}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 33  PrevLogTerm: 3 leaderCommit: 29 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:29 
server 2 log:
term 4 server 0 AppendEntries true commitIndex:29 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=35
update matchIndex[0]=34
update leader CommitIndex=34
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=35
update matchIndex[2]=34
update leader CommitIndex=34
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
flag 94747 term 4 leader 1 nextIndex[0]: 35  matchIndex[0]: 34
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
flag 77106 term 4 leader 1 nextIndex[2]: 35  matchIndex[2]: 34
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:34 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=35
update matchIndex[2]=34
update leader CommitIndex=34
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:34 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=35
update matchIndex[0]=34
update leader CommitIndex=34
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34}]
------------------------------------------------------
client write log 4001338935724060850 (index 35) to leader 1
flag 44611 term 4 leader 1 nextIndex[0]: 35  matchIndex[0]: 34
[{4001338935724060850 4 35}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
flag 22971 term 4 leader 1 nextIndex[2]: 35  matchIndex[2]: 34
[{4001338935724060850 4 35}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 34  PrevLogTerm: 4 leaderCommit: 34 
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:34 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:34 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=36
update matchIndex[0]=35
update leader CommitIndex=35
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=36
update matchIndex[2]=35
update leader CommitIndex=35
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
flag 72909 term 4 leader 1 nextIndex[0]: 36  matchIndex[0]: 35
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
flag 53415 term 4 leader 1 nextIndex[2]: 36  matchIndex[2]: 35
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:35 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=36
update matchIndex[0]=35
update leader CommitIndex=35
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:35 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=36
update matchIndex[2]=35
update leader CommitIndex=35
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35}]
------------------------------------------------------
client write log 9168178264897180338 (index 36) to leader 1
leader 0 sendAppendEntries -> server 2 false nextIndex[2] 21->20
------------------------------------------------------
flag 36601 term 4 leader 1 nextIndex[0]: 36  matchIndex[0]: 35
[{9168178264897180338 4 36}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
flag 16022 term 4 leader 1 nextIndex[2]: 36  matchIndex[2]: 35
[{9168178264897180338 4 36}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 35  PrevLogTerm: 4 leaderCommit: 35 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:35 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=37
update matchIndex[2]=36
update leader CommitIndex=36
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:35 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=37
update matchIndex[0]=36
update leader CommitIndex=36
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
flag 22317 term 4 leader 1 nextIndex[0]: 37  matchIndex[0]: 36
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
flag 25467 term 4 leader 1 nextIndex[2]: 37  matchIndex[2]: 36
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:36 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:36 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=37
update matchIndex[0]=36
update leader CommitIndex=36
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=37
update matchIndex[2]=36
update leader CommitIndex=36
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36}]
------------------------------------------------------
client write log 8166637946296386678 (index 37) to leader 1
flag 47636 term 4 leader 1 nextIndex[0]: 37  matchIndex[0]: 36
[{8166637946296386678 4 37}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
flag 26574 term 4 leader 1 nextIndex[2]: 37  matchIndex[2]: 36
[{8166637946296386678 4 37}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 36  PrevLogTerm: 4 leaderCommit: 36 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:36 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=38
update matchIndex[2]=37
update leader CommitIndex=37
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:36 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=38
update matchIndex[0]=37
update leader CommitIndex=37
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
------------------------------------------------------
flag 14133 term 4 leader 1 nextIndex[0]: 38  matchIndex[0]: 37
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
flag 19668 term 4 leader 1 nextIndex[2]: 38  matchIndex[2]: 37
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:37 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
term 4 server 2 AppendEntries true commitIndex:37 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
------------------------------------------------------
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=38
update matchIndex[2]=37
update leader CommitIndex=37
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=38
update matchIndex[0]=37
update leader CommitIndex=37
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37}]
------------------------------------------------------
client write log 2516065347239987924 (index 38) to leader 1
flag 58311 term 4 leader 1 nextIndex[0]: 38  matchIndex[0]: 37
[{2516065347239987924 4 38}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
flag 77933 term 4 leader 1 nextIndex[2]: 38  matchIndex[2]: 37
[{2516065347239987924 4 38}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 37  PrevLogTerm: 4 leaderCommit: 37 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:37 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=39
update matchIndex[2]=38
update leader CommitIndex=38
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:37 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=39
update matchIndex[0]=38
update leader CommitIndex=38
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
flag 99173 term 4 leader 1 nextIndex[0]: 39  matchIndex[0]: 38
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
flag 83347 term 4 leader 1 nextIndex[2]: 39  matchIndex[2]: 38
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:38 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:38 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=39
update matchIndex[2]=38
update leader CommitIndex=38
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=39
update matchIndex[0]=38
update leader CommitIndex=38
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38}]
------------------------------------------------------
client write log 450940962303513669 (index 39) to leader 1
flag 37697 term 4 leader 1 nextIndex[0]: 39  matchIndex[0]: 38
[{450940962303513669 4 39}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
flag 38061 term 4 leader 1 nextIndex[2]: 39  matchIndex[2]: 38
[{450940962303513669 4 39}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 38  PrevLogTerm: 4 leaderCommit: 38 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:38 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38} {450940962303513669 4 39}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=40
update matchIndex[2]=39
update leader CommitIndex=39
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38} {450940962303513669 4 39}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:38 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38} {450940962303513669 4 39}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=40
update matchIndex[0]=39
update leader CommitIndex=39
leader log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38} {450940962303513669 4 39}]
------------------------------------------------------
term 4 Server1 start snapshot! index=39
term 4 server1 snapshot success
lastIncludedIndex=39 lastApplied=39 lastIndex=39
-------------------------------------------------------------
flag 22291 term 4 leader 1 nextIndex[0]: 40  matchIndex[0]: 39
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
flag 8651 term 4 leader 1 nextIndex[2]: 40  matchIndex[2]: 39
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:39 
server 2 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38} {450940962303513669 4 39}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=40
update matchIndex[2]=39
update leader CommitIndex=39
leader log:
[{snapshot 4 39}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:39 
server 0 log:
[{snapshot 3 29} {8128596849167032915 3 30} {8827761295312182294 3 31} {6723335458752949 3 32} {1873898758988989465 3 33} {3560925300216034928 4 34} {4001338935724060850 4 35} {9168178264897180338 4 36} {8166637946296386678 4 37} {2516065347239987924 4 38} {450940962303513669 4 39}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=40
update matchIndex[0]=39
update leader CommitIndex=39
leader log:
[{snapshot 4 39}]
------------------------------------------------------
term 4 Server2 start snapshot! index=39
term 4 server2 snapshot success
lastIncludedIndex=39 lastApplied=39 lastIndex=39
-------------------------------------------------------------
term 4 Server0 start snapshot! index=39
term 4 server0 snapshot success
lastIncludedIndex=39 lastApplied=39 lastIndex=39
-------------------------------------------------------------
client write log 4724750204727170735 (index 40) to leader 1
flag 82979 term 4 leader 1 nextIndex[0]: 40  matchIndex[0]: 39
[{4724750204727170735 4 40}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
flag 28049 term 4 leader 1 nextIndex[2]: 40  matchIndex[2]: 39
[{4724750204727170735 4 40}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 39  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:39 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=41
update matchIndex[2]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:39 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=41
update matchIndex[0]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
flag 35307 term 4 leader 1 nextIndex[0]: 41  matchIndex[0]: 40
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 4 leaderCommit: 40 
------------------------------------------------------
flag 5888 term 4 leader 1 nextIndex[2]: 41  matchIndex[2]: 40
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 4 leaderCommit: 40 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:40 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=41
update matchIndex[2]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:40 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=41
update matchIndex[0]=40
update leader CommitIndex=40
leader log:
[{snapshot 4 39} {4724750204727170735 4 40}]
------------------------------------------------------
client write log 7558826450125560487 (index 41) to leader 1
flag 57092 term 4 leader 1 nextIndex[0]: 41  matchIndex[0]: 40
[{7558826450125560487 4 41}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 4 leaderCommit: 40 
------------------------------------------------------
flag 51314 term 4 leader 1 nextIndex[2]: 41  matchIndex[2]: 40
[{7558826450125560487 4 41}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 40  PrevLogTerm: 4 leaderCommit: 40 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:40 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=42
update matchIndex[2]=41
update leader CommitIndex=41
term 4 server 0 AppendEntries true commitIndex:40 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=42
update matchIndex[0]=41
update leader CommitIndex=41
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
flag 4098 term 4 leader 1 nextIndex[0]: 42  matchIndex[0]: 41
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 4 leaderCommit: 41 
------------------------------------------------------
flag 75216 term 4 leader 1 nextIndex[2]: 42  matchIndex[2]: 41
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 4 leaderCommit: 41 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:41 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=42
update matchIndex[2]=41
update leader CommitIndex=41
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:41 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=42
update matchIndex[0]=41
update leader CommitIndex=41
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41}]
------------------------------------------------------
client write log 6088938952060615800 (index 42) to leader 1
flag 47224 term 4 leader 1 nextIndex[0]: 42  matchIndex[0]: 41
[{6088938952060615800 4 42}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 4 leaderCommit: 41 
------------------------------------------------------
flag 89141 term 4 leader 1 nextIndex[2]: 42  matchIndex[2]: 41
[{6088938952060615800 4 42}]
term 4 leader 1 sendAppendEntries PrevLogIndex: 41  PrevLogTerm: 4 leaderCommit: 41 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:41 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:41 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=43
update matchIndex[2]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=43
update matchIndex[0]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
flag 73014 term 4 leader 1 nextIndex[0]: 43  matchIndex[0]: 42
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 42 
------------------------------------------------------
flag 48420 term 4 leader 1 nextIndex[2]: 43  matchIndex[2]: 42
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 42 
------------------------------------------------------
term 4 server 2 AppendEntries true commitIndex:42 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=43
update matchIndex[2]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
term 4 server 0 AppendEntries true commitIndex:42 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=43
update matchIndex[0]=42
update leader CommitIndex=42
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 4 voteFor 1 logs [{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 4 voteFor 1 logs [{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 4 voteFor 1 logs [{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
!!!!!! server 2 crash
flag 45726 term 4 leader 1 nextIndex[0]: 43  matchIndex[0]: 42
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 42 
------------------------------------------------------
flag 24865 term 4 leader 1 nextIndex[2]: 43  matchIndex[2]: 42
[]
term 4 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 42 
------------------------------------------------------
term 5 server 2 vote for server 1
term 5 server 0 vote for server 1
term 5 server 1 get vote from server 2
term 5 server 1 become leader
------------------------------------------------------
term 5 server 1 get outdate rpc reply from server 0
flag 45640 term 5 leader 1 nextIndex[0]: 43  matchIndex[0]: 0
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
flag 39612 term 5 leader 1 nextIndex[2]: 43  matchIndex[2]: 0
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:39 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
term 5 server 0 AppendEntries true commitIndex:39 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
update nextIndex[2]=43
update matchIndex[2]=42
update leader CommitIndex=39
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=43
update matchIndex[0]=42
update leader CommitIndex=39
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42}]
------------------------------------------------------
client write log 5535924377484323294 (index 43) to leader 1
flag 54381 term 5 leader 1 nextIndex[0]: 43  matchIndex[0]: 42
[{5535924377484323294 5 43}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
flag 82908 term 5 leader 1 nextIndex[2]: 43  matchIndex[2]: 42
[{5535924377484323294 5 43}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 42  PrevLogTerm: 4 leaderCommit: 39 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:39 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=44
update matchIndex[2]=43
update leader CommitIndex=43
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:39 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=44
update matchIndex[0]=43
update leader CommitIndex=43
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
flag 5315 term 5 leader 1 nextIndex[0]: 44  matchIndex[0]: 43
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
flag 30024 term 5 leader 1 nextIndex[2]: 44  matchIndex[2]: 43
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:43 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=44
update matchIndex[2]=43
update leader CommitIndex=43
term 5 server 0 AppendEntries true commitIndex:43 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=44
update matchIndex[0]=43
update leader CommitIndex=43
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43}]
------------------------------------------------------
client write log 2271769098814862817 (index 44) to leader 1
flag 64904 term 5 leader 1 nextIndex[0]: 44  matchIndex[0]: 43
[{2271769098814862817 5 44}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
flag 34939 term 5 leader 1 nextIndex[2]: 44  matchIndex[2]: 43
[{2271769098814862817 5 44}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 43  PrevLogTerm: 5 leaderCommit: 43 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:43 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=45
update matchIndex[2]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:43 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=45
update matchIndex[0]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
flag 25395 term 5 leader 1 nextIndex[0]: 45  matchIndex[0]: 44
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
flag 37547 term 5 leader 1 nextIndex[2]: 45  matchIndex[2]: 44
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:44 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=45
update matchIndex[2]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:44 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=45
update matchIndex[0]=44
update leader CommitIndex=44
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44}]
------------------------------------------------------
client write log 4236502925844556152 (index 45) to leader 1
flag 96496 term 5 leader 1 nextIndex[0]: 45  matchIndex[0]: 44
[{4236502925844556152 5 45}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
flag 52678 term 5 leader 1 nextIndex[2]: 45  matchIndex[2]: 44
[{4236502925844556152 5 45}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 44  PrevLogTerm: 5 leaderCommit: 44 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:44 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:44 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=46
update matchIndex[2]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=46
update matchIndex[0]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
flag 6754 term 5 leader 1 nextIndex[0]: 46  matchIndex[0]: 45
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
flag 4106 term 5 leader 1 nextIndex[2]: 46  matchIndex[2]: 45
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:45 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=46
update matchIndex[2]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:45 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=46
update matchIndex[0]=45
update leader CommitIndex=45
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45}]
------------------------------------------------------
client write log 1693884046539887694 (index 46) to leader 1
flag 67163 term 5 leader 1 nextIndex[0]: 46  matchIndex[0]: 45
[{1693884046539887694 5 46}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
flag 19225 term 5 leader 1 nextIndex[2]: 46  matchIndex[2]: 45
[{1693884046539887694 5 46}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 45  PrevLogTerm: 5 leaderCommit: 45 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:45 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=47
update matchIndex[2]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:45 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=47
update matchIndex[0]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
flag 29713 term 5 leader 1 nextIndex[0]: 47  matchIndex[0]: 46
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
flag 6068 term 5 leader 1 nextIndex[2]: 47  matchIndex[2]: 46
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:46 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:46 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=47
update matchIndex[0]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=47
update matchIndex[2]=46
update leader CommitIndex=46
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46}]
------------------------------------------------------
client write log 8126429239173443936 (index 47) to leader 1
flag 26200 term 5 leader 1 nextIndex[0]: 47  matchIndex[0]: 46
[{8126429239173443936 5 47}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
flag 36501 term 5 leader 1 nextIndex[2]: 47  matchIndex[2]: 46
[{8126429239173443936 5 47}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 46  PrevLogTerm: 5 leaderCommit: 46 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:46 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:46 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=48
update matchIndex[2]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=48
update matchIndex[0]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
flag 11912 term 5 leader 1 nextIndex[0]: 48  matchIndex[0]: 47
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
flag 37232 term 5 leader 1 nextIndex[2]: 48  matchIndex[2]: 47
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:47 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=48
update matchIndex[2]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:47 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=48
update matchIndex[0]=47
update leader CommitIndex=47
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47}]
------------------------------------------------------
client write log 2560360588864515260 (index 48) to leader 1
flag 22964 term 5 leader 1 nextIndex[0]: 48  matchIndex[0]: 47
[{2560360588864515260 5 48}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
flag 12653 term 5 leader 1 nextIndex[2]: 48  matchIndex[2]: 47
[{2560360588864515260 5 48}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 47  PrevLogTerm: 5 leaderCommit: 47 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:47 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=49
update matchIndex[2]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:47 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=49
update matchIndex[0]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 false nextIndex[1] 21->20
------------------------------------------------------
flag 69248 term 5 leader 1 nextIndex[0]: 49  matchIndex[0]: 48
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 48  PrevLogTerm: 5 leaderCommit: 48 
------------------------------------------------------
flag 45734 term 5 leader 1 nextIndex[2]: 49  matchIndex[2]: 48
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 48  PrevLogTerm: 5 leaderCommit: 48 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:48 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=49
update matchIndex[2]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:48 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=49
update matchIndex[0]=48
update leader CommitIndex=48
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48}]
------------------------------------------------------
client write log 8376526198789594385 (index 49) to leader 1
flag 41233 term 5 leader 1 nextIndex[0]: 49  matchIndex[0]: 48
[{8376526198789594385 5 49}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 48  PrevLogTerm: 5 leaderCommit: 48 
------------------------------------------------------
flag 38904 term 5 leader 1 nextIndex[2]: 49  matchIndex[2]: 48
[{8376526198789594385 5 49}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 48  PrevLogTerm: 5 leaderCommit: 48 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:48 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48} {8376526198789594385 5 49}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=50
update matchIndex[2]=49
update leader CommitIndex=49
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48} {8376526198789594385 5 49}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:48 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48} {8376526198789594385 5 49}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=50
update matchIndex[0]=49
update leader CommitIndex=49
leader log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48} {8376526198789594385 5 49}]
------------------------------------------------------
term 5 Server1 start snapshot! index=49
term 5 server1 snapshot success
lastIncludedIndex=49 lastApplied=49 lastIndex=49
-------------------------------------------------------------
flag 11779 term 5 leader 1 nextIndex[0]: 50  matchIndex[0]: 49
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 49  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
flag 48280 term 5 leader 1 nextIndex[2]: 50  matchIndex[2]: 49
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 49  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:49 
server 2 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48} {8376526198789594385 5 49}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:49 
server 0 log:
[{snapshot 4 39} {4724750204727170735 4 40} {7558826450125560487 4 41} {6088938952060615800 4 42} {5535924377484323294 5 43} {2271769098814862817 5 44} {4236502925844556152 5 45} {1693884046539887694 5 46} {8126429239173443936 5 47} {2560360588864515260 5 48} {8376526198789594385 5 49}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=50
update matchIndex[2]=49
update leader CommitIndex=49
leader log:
[{snapshot 5 49}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=50
update matchIndex[0]=49
update leader CommitIndex=49
leader log:
[{snapshot 5 49}]
------------------------------------------------------
term 5 Server0 start snapshot! index=49
term 5 server0 snapshot success
lastIncludedIndex=49 lastApplied=49 lastIndex=49
-------------------------------------------------------------
term 5 Server2 start snapshot! index=49
term 5 server2 snapshot success
lastIncludedIndex=49 lastApplied=49 lastIndex=49
-------------------------------------------------------------
client write log 4289601963363998507 (index 50) to leader 1
leader 2 sendAppendEntries -> server 1 false nextIndex[1] 34->33
------------------------------------------------------
flag 95712 term 5 leader 1 nextIndex[0]: 50  matchIndex[0]: 49
[{4289601963363998507 5 50}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 49  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
flag 80424 term 5 leader 1 nextIndex[2]: 50  matchIndex[2]: 49
[{4289601963363998507 5 50}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 49  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:49 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=51
update matchIndex[2]=50
update leader CommitIndex=50
leader log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:49 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=51
update matchIndex[0]=50
update leader CommitIndex=50
leader log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
flag 28472 term 5 leader 1 nextIndex[0]: 51  matchIndex[0]: 50
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 50  PrevLogTerm: 5 leaderCommit: 50 
------------------------------------------------------
flag 63252 term 5 leader 1 nextIndex[2]: 51  matchIndex[2]: 50
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 50  PrevLogTerm: 5 leaderCommit: 50 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:50 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:50 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=51
update matchIndex[2]=50
update leader CommitIndex=50
leader log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=51
update matchIndex[0]=50
update leader CommitIndex=50
leader log:
[{snapshot 5 49} {4289601963363998507 5 50}]
------------------------------------------------------
client write log 3833824624400865661 (index 51) to leader 1
flag 68854 term 5 leader 1 nextIndex[0]: 51  matchIndex[0]: 50
[{3833824624400865661 5 51}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 50  PrevLogTerm: 5 leaderCommit: 50 
------------------------------------------------------
flag 77037 term 5 leader 1 nextIndex[2]: 51  matchIndex[2]: 50
[{3833824624400865661 5 51}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 50  PrevLogTerm: 5 leaderCommit: 50 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:50 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:50 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=52
update matchIndex[2]=51
update leader CommitIndex=51
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=52
update matchIndex[0]=51
update leader CommitIndex=51
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
flag 59458 term 5 leader 1 nextIndex[0]: 52  matchIndex[0]: 51
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 51  PrevLogTerm: 5 leaderCommit: 51 
------------------------------------------------------
flag 31021 term 5 leader 1 nextIndex[2]: 52  matchIndex[2]: 51
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 51  PrevLogTerm: 5 leaderCommit: 51 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:51 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:51 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=52
update matchIndex[0]=51
update leader CommitIndex=51
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=52
update matchIndex[2]=51
update leader CommitIndex=51
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51}]
------------------------------------------------------
client write log 1658161770295583084 (index 52) to leader 1
flag 58625 term 5 leader 1 nextIndex[0]: 52  matchIndex[0]: 51
[{1658161770295583084 5 52}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 51  PrevLogTerm: 5 leaderCommit: 51 
------------------------------------------------------
flag 52498 term 5 leader 1 nextIndex[2]: 52  matchIndex[2]: 51
[{1658161770295583084 5 52}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 51  PrevLogTerm: 5 leaderCommit: 51 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:51 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=53
update matchIndex[2]=52
update leader CommitIndex=52
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:51 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=53
update matchIndex[0]=52
update leader CommitIndex=52
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
flag 83786 term 5 leader 1 nextIndex[0]: 53  matchIndex[0]: 52
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 52  PrevLogTerm: 5 leaderCommit: 52 
------------------------------------------------------
flag 53541 term 5 leader 1 nextIndex[2]: 53  matchIndex[2]: 52
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 52  PrevLogTerm: 5 leaderCommit: 52 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:52 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=53
update matchIndex[2]=52
update leader CommitIndex=52
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:52 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=53
update matchIndex[0]=52
update leader CommitIndex=52
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52}]
------------------------------------------------------
client write log 6215258332100290414 (index 53) to leader 1
flag 18328 term 5 leader 1 nextIndex[0]: 53  matchIndex[0]: 52
[{6215258332100290414 5 53}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 52  PrevLogTerm: 5 leaderCommit: 52 
------------------------------------------------------
flag 7851 term 5 leader 1 nextIndex[2]: 53  matchIndex[2]: 52
[{6215258332100290414 5 53}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 52  PrevLogTerm: 5 leaderCommit: 52 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:52 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=54
update matchIndex[2]=53
update leader CommitIndex=53
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:52 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=54
update matchIndex[0]=53
update leader CommitIndex=53
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
flag 90220 term 5 leader 1 nextIndex[0]: 54  matchIndex[0]: 53
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 53  PrevLogTerm: 5 leaderCommit: 53 
------------------------------------------------------
flag 81599 term 5 leader 1 nextIndex[2]: 54  matchIndex[2]: 53
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 53  PrevLogTerm: 5 leaderCommit: 53 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:53 
server 2 log:
term 5 server 0 AppendEntries true commitIndex:53 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=54
update matchIndex[0]=53
update leader CommitIndex=53
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=54
update matchIndex[2]=53
update leader CommitIndex=53
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53}]
------------------------------------------------------
client write log 3557387846935015018 (index 54) to leader 1
leader 1 sendAppendEntries -> server 0 false nextIndex[0] 43->42
------------------------------------------------------
flag 54426 term 5 leader 1 nextIndex[0]: 54  matchIndex[0]: 53
[{3557387846935015018 5 54}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 53  PrevLogTerm: 5 leaderCommit: 53 
------------------------------------------------------
flag 50228 term 5 leader 1 nextIndex[2]: 54  matchIndex[2]: 53
[{3557387846935015018 5 54}]
term 5 leader 1 sendAppendEntries PrevLogIndex: 53  PrevLogTerm: 5 leaderCommit: 53 
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:53 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=55
update matchIndex[0]=54
update leader CommitIndex=54
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:53 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=55
update matchIndex[2]=54
update leader CommitIndex=54
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
flag 38580 term 5 leader 1 nextIndex[0]: 55  matchIndex[0]: 54
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 54 
------------------------------------------------------
flag 23403 term 5 leader 1 nextIndex[2]: 55  matchIndex[2]: 54
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 54 
------------------------------------------------------
term 5 server 2 AppendEntries true commitIndex:54 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 2 true
update nextIndex[2]=55
update matchIndex[2]=54
update leader CommitIndex=54
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
term 5 server 0 AppendEntries true commitIndex:54 
server 0 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
leader 1 sendAppendEntries -> server 0 true
update nextIndex[0]=55
update matchIndex[0]=54
update leader CommitIndex=54
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
!!!!!! server 0 crash
!!!!!! server 1 crash
!!!!!! server 2 crash
获取persist信息成功 server 0 currentTerm 5 voteFor 1 logs [{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
!!!!!! server 0 crash
获取persist信息成功 server 1 currentTerm 5 voteFor 1 logs [{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
!!!!!! server 1 crash
获取persist信息成功 server 2 currentTerm 5 voteFor 1 logs [{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
!!!!!! server 2 crash
flag 33318 term 5 leader 1 nextIndex[0]: 55  matchIndex[0]: 54
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 54 
------------------------------------------------------
flag 15480 term 5 leader 1 nextIndex[2]: 55  matchIndex[2]: 54
[]
term 5 leader 1 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 54 
------------------------------------------------------
term 6 server 2 vote for server 0
term 6 server 1 vote for server 0
term 6 server 0 get vote from server 2
term 6 server 0 become leader
------------------------------------------------------
term 6 server 0 get outdate rpc reply from server 1
flag 79357 term 6 leader 0 nextIndex[1]: 55  matchIndex[1]: 0
[]
term 6 leader 0 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
flag 93376 term 6 leader 0 nextIndex[2]: 55  matchIndex[2]: 0
[]
term 6 leader 0 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
term 6 server 2 AppendEntries true commitIndex:49 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
term 6 server 1 AppendEntries true commitIndex:49 
server 1 log:
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=55
update matchIndex[2]=54
update leader CommitIndex=49
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=55
update matchIndex[1]=54
update leader CommitIndex=49
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54}]
------------------------------------------------------
client write log 5486402926264948541 (index 55) to leader 0
flag 42103 term 6 leader 0 nextIndex[1]: 55  matchIndex[1]: 54
[{5486402926264948541 6 55}]
term 6 leader 0 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
flag 96408 term 6 leader 0 nextIndex[2]: 55  matchIndex[2]: 54
[{5486402926264948541 6 55}]
term 6 leader 0 sendAppendEntries PrevLogIndex: 54  PrevLogTerm: 5 leaderCommit: 49 
------------------------------------------------------
term 6 server 2 AppendEntries true commitIndex:49 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
term 6 server 1 AppendEntries true commitIndex:49 
server 1 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=56
update matchIndex[2]=55
update leader CommitIndex=55
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=56
update matchIndex[1]=55
update leader CommitIndex=55
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
flag 68569 term 6 leader 0 nextIndex[1]: 56  matchIndex[1]: 55
[]
term 6 leader 0 sendAppendEntries PrevLogIndex: 55  PrevLogTerm: 6 leaderCommit: 55 
------------------------------------------------------
flag 82445 term 6 leader 0 nextIndex[2]: 56  matchIndex[2]: 55
[]
term 6 leader 0 sendAppendEntries PrevLogIndex: 55  PrevLogTerm: 6 leaderCommit: 55 
------------------------------------------------------
term 6 server 1 AppendEntries true commitIndex:55 
server 1 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 1 true
update nextIndex[1]=56
update matchIndex[1]=55
update leader CommitIndex=55
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
term 6 server 2 AppendEntries true commitIndex:55 
server 2 log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
leader 0 sendAppendEntries -> server 2 true
update nextIndex[2]=56
update matchIndex[2]=55
update leader CommitIndex=55
leader log:
[{snapshot 5 49} {4289601963363998507 5 50} {3833824624400865661 5 51} {1658161770295583084 5 52} {6215258332100290414 5 53} {3557387846935015018 5 54} {5486402926264948541 6 55}]
------------------------------------------------------
  ... Passed --  12.6  3  270   79247   55
--- PASS: TestSnapshotAllCrash2D (12.60s)
PASS
